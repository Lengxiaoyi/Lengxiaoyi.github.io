<!DOCTYPE html>
<html lang="en">
  




<head>
	<meta charset="utf-8">
	<title>Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读 - 冷宜隆的博客</title>
	<link rel="canonical" href="http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html">
	<meta name="description" content="近数据端处理">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:4000"},
  "headline": "Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读",
  "abstract": "近数据端处理",
    "keywords": "FPGA, HTAP, 异构数据库",
    "wordcount": "1010",
    "image": ["http://localhost:4000/assets/imgposts/20240421/FPGA.png"],
  "datePublished": "2024-04-18 05:45:00 +0800",
  "dateModified": "2024-04-18 05:45:00 +0800",
  "author": {
    "@type": "Person",
    "name": "冷宜隆"},
  "publisher": {
    "@type":  "Organization",
    "logo": {
        "@type": "ImageObject",
        "encodingFormat": "image/png",
        "contentUrl": "http://localhost:4000/assets/img/branding/YIlong_last.png",
        "url": "http://localhost:4000/assets/img/branding/YIlong_last.png"},
    "name" : "冷宜隆的博客"}
}
</script>
<!-- Open Graph data -->
<meta property="og:url" content="http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读"/>
<meta property="og:description" content="近数据端处理"/>
<meta property="og:image" content="http://localhost:4000/assets/imgposts/20240421/FPGA.png"/>
<meta property="og:image:alt" content="Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读"/>
<meta property="og:site_name" content="冷宜隆的博客" />
<meta property="article:published_time" content="2024-04-18 05:45:00 +0800" />
<meta property="article:modified_time" content="2024-04-18 05:45:00 +0800" />
<meta property="article:tag" content="FPGA, HTAP, 异构数据库" />
<meta property="fb:admins" content="ar.maybach" />
<!-- Schema.org markup for Google -->
<meta itemprop="name" content="Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读">
<meta itemprop="description" content="近数据端处理">
<meta itemprop="image" content="http://localhost:4000/assets/imgposts/20240421/FPGA.png">
<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@MvmThe">
<meta name="twitter:title" content="Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读">
<meta name="twitter:description" content="近数据端处理">
<meta name="twitter:creator" content="">
<meta data-rh="true" name="twitter:label1" content="Word count"/>
<meta data-rh="true" name="twitter:data1" content="1010"/>
<meta name="twitter:image:src" content="http://localhost:4000/assets/img/posts/20240421/FPGA.png">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#311e3e">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#311e3e">
	<!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.gstatic.com" />
	<style>
/* latin */
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/lora/v17/0QIvMX1D_JOuMwr7I_FMl_E.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/lora/v17/0QIvMX1D_JOuMwr7I_FMl_E.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 200;
  src: url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xKydSBYKcSV-LCoeQqfX1RYOo3i94_wlxdu3cOWxw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 700;
  src: url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
	</style>
	<!-- <link href="https://fonts.googleapis.com/css?family=Lora:400,600|Source+Sans+Pro:200,400,700" rel="stylesheet"> -->
	<!-- Font Awesome -->
	<link rel="stylesheet" href="./assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="./assets/css/main.css">
	




<link rel="icon" href="./assets/img/favicon/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="./assets/img/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="72x72" href="./assets/img/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="114x114" href="./assets/img/favicon/favicon.ico">
	
	<link rel="stylesheet" href="./assets/css/highlighter/syntax-base16.monokai.dark.css">
	
</head>

  <body>
    




<section class="hidden">
  <div class="post">
      <a  class="post-list-title" href="./FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html">Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读</a>
      

  <span class = "post-card-meta">
  
  
    <span class="meta-pre"></span>
  
  
    
      
      <span class="page_meta-date">
        <time datetime="2024-04-18T05:45:00+08:00">April 18, 2024</time>
      </span>
    
    
      <span class="meta-sep"></span>
    
  
  
    
    
    <span class="page_meta-readtime">
      
        5 minute read
      
    </span>
  
  
  </span>

        <div class="post-excerpt">
            <h1 id="near-data-processing-in-database-systems-on-native-computational-storage-under-htap-workloads">Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads</h1><h2 id="前置知识补充">前置知识补充</h2><h3 id="olap">OLAP</h3><p>OLAP是一种数据处理技术，专门设计用于支持复杂的分析操作，侧重对决策人员和高层管理人员的决策支持。OLAP的主要用途是分析聚合数据，生成报告，执行复杂的数据分析，确定趋势，以及支持商业智能应用。OLAP系统通常是数据仓库解决方案的中间分析层。</p><h3 id="oltp">OLTP</h3><p>OLTP则是一种事务处理，主要用于处理数据库事务。OLTP系统的主要用途是处理订单，更新库存，管理客户账户等面向事务的应用。OLTP系统旨在使事务应用程序仅写入所需的数据，以便尽快处理单个事务。</p><h3 id="htap">HTAP</h3><p>HTAP（Hybrid Transaction / Analytical Processing，混合事务分析处理）是一种新兴的应用体系结构，它打破了事务处理和分析之间的“墙”。它在一份数据上同时支持OLTP（联机事务处理）和OLAP（联机分析处理）场景，需要创新的计算存储框架，从而实现事务的同时支持实时分析，省去费时的ETL过程。</p><p>HTAP的主要优势是能够在同一份数据上进行事务处理和分析处理，这样可以避免数据同步和转换的延迟，提高数据处理的实时性和准确性。例如，电商、金融行业的订单、付款信息需要实时同步到结算库的库存数据进行结算对账，各渠道交易数据统计，精准资损防控，这些信息实际上就需要实现快速的数据同步，传统的ETL它无法做到这么快速。</p><p>HTAP应用列子：</p><p>假设你是一家全球电商公司的业务分析师，你需要处理大量的在线事务（例如订单处理、库存更新、客户服务等），同时还需要进行实时的业务分析（例如销售趋势、库存状态、客户行为等）。在传统的架构中，你可能需要维护两个独立的系统：一个OLTP系统用于处理在线事务，另一个OLAP系统用于进行业务分析。这两个系统通常需要通过ETL（Extract, Transform, Load）过程进行数据同步，这不仅增加了系统的复杂性，也可能导致数据延迟和不一致12。然而，如果你使用HTAP系统，你可以在同一份数据上同时进行在线事务处理和实时业务分析。例如，当一个新订单被创建时，它会立即被HTAP系统处理，并且这个新订单的信息会立即可用于业务分析。这样，你可以实时地看到新订单对销售趋势、库存状态等的影响。此外，HTAP系统还可以帮助你简化技术栈，因为你不再需要维护两个独立的系统和进行ETL过程。这可以降低运维的复杂性和成本。</p><p>名词解释 – ETL，全称为Extract-Transform-Load，是一种数据处理过程，主要用于从多个数据源抽取数据，然后对这些数据进行转换和清洗，以满足特定的业务需求，最后将清洗后的数据加载到目标系统（如数据仓库）中。以下是ETL的三个主要步骤：</p><ul> <li>提取（Extract）：从多个源系统中抽取所需的数据。这些源系统可以包括各种类型的数据库、文件系统、应用程序等。</li> <li>转换（Transform）：将提取出的数据进行清洗和转换，以满足目标系统的数据要求。这可能包括数据清洗、去重、格式转换、计算新的数据项等操作。</li> <li>加载（Load）：将转换后的数据加载到目标系统中。这通常涉及将数据插入到数据库表中，或者将数据写入到文件系统中。</li></ul><h3 id="cosmos">COSMOS+</h3><p>COSMOS+是一个开源硬件和软件平台，它是OpenSSD项目的一部分1。COSMOS+ OpenSSD平台包括以下组件：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HYU Tiger4 SSD控制器，由XC7Z045-FFG900-3 Zynq-7000 FPGA实现双核1GHz ARM Cortex-A9核心每个核心的Neon DSP协处理器350K LCs1GByte DDR3 SDRAM内存双QSPI闪存1个SD卡插槽主机接口：双PCIe Gen2 x8端点（有线PCIe接口）支持NVMe命令集的子集连接性：1个千兆以太网接口，1个USB 2.0（可配置为主机或设备），控制台调试接口，1个USB-UART端口，1个ARM JTAG，1个PL JTAG，1个Digilent USB-JTAG1</code></pre></div></div><h3 id="alveo-u280">Alveo U280</h3><p>Alveo U280是一款数据中心加速器卡，由AMD公司生产。</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>架构：Alveo U280基于AMD 16nm UltraScale+™架构12。内存：Alveo U280配备了8GB的HBM2和32GB的DDR4内存12。带宽：Alveo U280能够以460 GB/s的带宽提供8GB的HBM212。适用领域：Alveo U280适用于数据库、分析和机器学习推断等内存有限的计算密集型应用12。接口：Alveo U280支持PCI Express 4.0，可为高带宽主机处理器利用最新的服务器互连基础设施12。适应性：Alveo加速器卡能适应不断变化的加速要求和算法标准，能在不改变硬件的情况下，加速任何工作负载，并能降低总体拥有成本</code></pre></div></div><h2 id="文章内容解析">文章内容解析</h2><h3 id="introduction">INTRODUCTION</h3><h4 id="data-to-code架构和code-to-data">data-to-code架构和code-to-data</h4><p>“Data-to-code”是一种数据处理模型，通常在传统的非HANA数据库中使用。当应用需要处理存储在数据库中的数据时，通常会将数据从数据库中取出，传输到应用服务器，然后在应用服务器上进行计算。这种模型的问题是，随着数据量的增长，数据从数据库到应用服务器的传输成为了一个瓶颈。</p><p>相反，在”code-to-data”模型中，我们将这些应用处理逻辑，编写为一个数据库查询或存储过程 (Store Procedure)，并将其发送到数据库服务器执行。数据库服务器将处理数据，并将结果返回给应用。这样，在应用服务器和数据库之间，只需要传输最终的结果，而不是原始的数据。这将显著减少数据传输的时间和网络带宽的使用。</p><p>总的来说，”data-to-code”和”code-to-data”是两种不同的数据处理模型，它们分别代表了数据处理的两种不同方法：一种是将数据带到代码（即应用服务器）进行处理，另一种是将代码带到数据（即数据库服务器）进行处理。</p><h4 id="activedisks">ActiveDisks</h4><p>Active Disks是一种计算模型，它将计算任务从主机服务器移动到存储设备，如硬盘驱动器。在Active Disks模型中，硬盘驱动器不仅仅是存储数据的设备，而且还能执行一些计算任务。这种模型的优点是可以减少数据在网络中的传输，从而提高数据处理的效率。例如，假设你有一个大型数据库，并且你想要对数据库中的数据进行一些复杂的分析。在传统的模型中，你需要将数据从硬盘驱动器传输到主机服务器，然后在主机服务器上进行计算。但是，如果你使用Active Disks模型，你可以直接在硬盘驱动器上进行一些计算，比如过滤和聚合，然后只将结果传输到主机服务器。这样，你可以减少网络传输的数据量，从而提高数据处理的效率。</p><h4 id="database-machines">Database Machines</h4><p>“Database Machines”是一种专门设计用于处理数据库操作的硬件和软件系统。这些系统通常包括一组专门的硬件设备（如服务器、存储设备等）和一套数据库管理系统（DBMS），它们共同工作，以提供高效、可靠的数据库服务。</p><p>例如，Oracle的Exadata Database Machine就是一种典型的Database Machine。它包括高性能的数据库服务器、智能存储服务器和内部网络设备，这些设备都经过精心设计和优化，以提供最佳的Oracle数据库性能。Exadata Database Machine还包括一些先进的技术，如PCIe闪存、RDMA内存和RoCE内部网络，这些技术可以进一步提高数据库的性能和可用性。</p><p><img src="./assets/img/posts/20240421/WX20231211-231141@2x.png" alt="HTAP系统处理架构" /></p><h4 id="图的部分解读">图的部分解读</h4><ul> <li>数据新鲜度 – 在HTAP环境中，数据新鲜度通常指的是数据的实时性，即数据从产生到可用于分析的时间间隔。在传统的OLTP（联机事务处理）和OLAP（联机分析处理）系统中，数据通常需要经过ETL（提取、转换、加载）过程才能用于分析，这个过程可能需要数小时甚至数天，因此数据的新鲜度较低。而在HTAP系统中，由于事务处理和分析处理在同一系统中进行，数据可以在产生后立即用于分析，因此数据的新鲜度较高。</li> <li>性能隔离 – 在HTAP环境中，性能隔离通常指的是在同一系统中运行的事务处理和分析处理之间的资源隔离。由于事务处理和分析处理对资源（如CPU、内存、I/O等）的使用方式不同，如果不进行性能隔离，两者可能会相互干扰，影响系统的性能。通过性能隔离，可以确保事务处理和分析处理各自有足够的资源，从而保证系统的稳定运行。</li> <li>Data Transfer Reduction – 由于HTAP环境需要在同一份数据上同时支持OLTP（联机事务处理）和OLAP（联机分析处理）场景，因此数据需要在计算节点和存储节点之间频繁地进行读写。这会消耗大量的网络带宽，并成为系统性能的瓶颈。为了解决这个问题，HTAP系统通常会采取一些策略来减少数据的传输量，这些策略可能包括数据压缩、数据去重、查询优化等。 <h4...<a class="read-more" href="./FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html"> read more</a>
        </div>
  </div>
</section>
<div class="flex-container transparent">
  




<header class="main-header">
  <div class="wrapper">
    <div class="header-flex">
      <div class="menu-icon-container">
        <span class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></span>
      </div>
      <nav class="main-nav">
        <span class="menu-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        <ul>
          <li>
            <div class="theme-toggle night">
    <input class="night" type="checkbox" id="theme-switch">
    <label class="night" for="theme-switch">
        <div class="toggle night"></div>
        <div class="names night">             
        <p class="light night"><svg class="night" width="20" viewBox="0 0 25 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path class="night" d="M12.5 2.49871C11.3401 2.50016 10.2282 2.96156 9.40801 3.78171C8.58785 4.60187 8.12645 5.71383 8.125 6.87371C8.125 7.03947 8.19085 7.19844 8.30806 7.31565C8.42527 7.43286 8.58424 7.49871 8.75 7.49871C8.91576 7.49871 9.07473 7.43286 9.19194 7.31565C9.30915 7.19844 9.375 7.03947 9.375 6.87371C9.37593 6.04519 9.70547 5.25088 10.2913 4.66503C10.8772 4.07918 11.6715 3.74964 12.5 3.74871C12.6658 3.74871 12.8247 3.68286 12.9419 3.56565C13.0592 3.44844 13.125 3.28947 13.125 3.12371C13.125 2.95795 13.0592 2.79898 12.9419 2.68177C12.8247 2.56456 12.6658 2.49871 12.5 2.49871V2.49871ZM12.5 -0.00129131C8.47891 -0.00129131 5.62031 3.26238 5.625 6.88269C5.62487 8.54403 6.22974 10.1486 7.32656 11.3964C8.32891 12.5378 9.29062 14.4007 9.375 14.9987L9.37734 17.9358C9.37744 18.0587 9.41402 18.1787 9.48242 18.2807L10.4395 19.7198C10.4964 19.8055 10.5737 19.8758 10.6644 19.9245C10.7551 19.9731 10.8564 19.9986 10.9594 19.9987H14.0395C14.1426 19.9988 14.2441 19.9734 14.3351 19.9247C14.426 19.8761 14.5034 19.8057 14.5605 19.7198L15.5176 18.28C15.5854 18.1776 15.6219 18.0578 15.6227 17.935L15.625 14.9987C15.7129 14.3846 16.6797 12.5303 17.6734 11.3964C18.5434 10.4028 19.1087 9.17963 19.3015 7.87318C19.4944 6.56673 19.3066 5.23238 18.7608 4.02985C18.215 2.82732 17.3342 1.80757 16.2238 1.09264C15.1135 0.377721 13.8206 -0.00207746 12.5 -0.00129131V-0.00129131ZM14.3727 17.7452L13.7047 18.7487H11.2937L10.6273 17.7452V17.4987H14.3738L14.3727 17.7452ZM14.375 16.2487H10.625L10.6227 14.9987H14.375V16.2487ZM16.7348 10.5725C16.1879 11.1956 15.316 12.4511 14.7594 13.7479H10.243C9.68516 12.4507 8.81328 11.1956 8.26641 10.5725C7.36971 9.5491 6.87599 8.2344 6.87734 6.87371C6.87031 3.8659 9.23594 1.24871 12.5 1.24871C15.602 1.24871 18.125 3.77176 18.125 6.87371C18.1249 8.23456 17.6305 9.54904 16.7336 10.5725H16.7348ZM3.75 6.87371C3.75 6.70795 3.68415 6.54898 3.56694 6.43177C3.44973 6.31456 3.29076 6.24871 3.125 6.24871H0.625C0.45924 6.24871 0.300269 6.31456 0.183058 6.43177C0.065848 6.54898 0 6.70795 0 6.87371C0 7.03947 0.065848 7.19844 0.183058 7.31565C0.300269 7.43286 0.45924 7.49871 0.625 7.49871H3.125C3.29076 7.49871 3.44973 7.43286 3.56694 7.31565C3.68415 7.19844 3.75 7.03947 3.75 6.87371ZM20.625 2.49871C20.7221 2.49849 20.8178 2.4759 20.9047 2.43269L23.4047 1.18269C23.5529 1.10852 23.6657 0.978483 23.718 0.821201C23.7704 0.66392 23.7582 0.492273 23.684 0.344021C23.6473 0.270614 23.5964 0.205161 23.5344 0.151397C23.4724 0.0976336 23.4004 0.0566132 23.3225 0.0306781C23.1652 -0.0217002 22.9936 -0.00945342 22.8453 0.0647243L20.3453 1.31472C20.2194 1.37771 20.1184 1.48136 20.0588 1.60889C19.9991 1.73643 19.9843 1.88037 20.0166 2.0174C20.049 2.15442 20.1267 2.2765 20.2371 2.36386C20.3475 2.45122 20.4842 2.49873 20.625 2.49871ZM24.375 6.24871H21.875C21.7092 6.24871 21.5503 6.31456 21.4331 6.43177C21.3158 6.54898 21.25 6.70795 21.25 6.87371C21.25 7.03947 21.3158 7.19844 21.4331 7.31565C21.5503 7.43286 21.7092 7.49871 21.875 7.49871H24.375C24.5408 7.49871 24.6997 7.43286 24.8169 7.31565C24.9342 7.19844 25 7.03947 25 6.87371C25 6.70795 24.9342 6.54898 24.8169 6.43177C24.6997 6.31456 24.5408 6.24871 24.375 6.24871ZM4.65469 1.31472L2.15469 0.0647243C2.08128 0.0279952 2.00136 0.00608435 1.91948 0.00024269C1.83761 -0.00559897 1.75539 0.004743 1.67751 0.0306781C1.52023 0.0830564 1.39019 0.195769 1.31602 0.344021C1.24184 0.492273 1.22959 0.66392 1.28197 0.821201C1.33435 0.978483 1.44706 1.10852 1.59531 1.18269L4.09531 2.43269C4.18223 2.4759 4.27794 2.49849 4.375 2.49871C4.5158 2.49873 4.65248 2.45122 4.7629 2.36386C4.87332 2.2765 4.951 2.15442 4.98337 2.0174C5.01574 1.88037 5.0009 1.73643 4.94124 1.60889C4.88158 1.48136 4.78061 1.37771 4.65469 1.31472ZM23.4047 12.5647L20.9047 11.3147C20.7564 11.2405 20.5847 11.2283 20.4274 11.2807C20.2701 11.3332 20.14 11.4459 20.0658 11.5942C19.9916 11.7425 19.9794 11.9142 20.0318 12.0715C20.0842 12.2289 20.197 12.3589 20.3453 12.4331L22.8453 13.6831C22.9936 13.7573 23.1653 13.7695 23.3226 13.7171C23.4799 13.6647 23.61 13.5519 23.6842 13.4036C23.7584 13.2553 23.7706 13.0836 23.7182 12.9263C23.6658 12.769 23.553 12.6389 23.4047 12.5647V12.5647ZM4.375 11.2487C4.27794 11.2489 4.18223 11.2715 4.09531 11.3147L1.59531 12.5647C1.44701 12.6389 1.33425 12.769 1.28183 12.9263C1.25588 13.0042 1.24552 13.0864 1.25135 13.1683C1.25719 13.2502 1.27909 13.3302 1.31582 13.4036C1.35255 13.477 1.40338 13.5425 1.46542 13.5963C1.52745 13.6501 1.59947 13.6911 1.67737 13.7171C1.83469 13.7695 2.00638 13.7573 2.15469 13.6831L4.65469 12.4331C4.78083 12.3702 4.88202 12.2666 4.94183 12.1389C5.00164 12.0113 5.01656 11.8672 4.98417 11.7301C4.95178 11.5929 4.87397 11.4707 4.76339 11.3833C4.65281 11.2959 4.51594 11.2485 4.375 11.2487V11.2487Z" /></svg></p>
        <p class="dark night"><svg class="night" width="20" viewBox="0 0 25 21" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path class="night" d="M6.39614 3.72646C7.50591 1.56178 9.72622 0.00900831 12.4782 0.00114817C13.8006 -0.00388798 15.0965 0.375153 16.2101 1.09278C17.3237 1.8104 18.2079 2.83612 18.7564 4.04682C19.3049 5.25751 19.4945 6.60175 19.3024 7.91818C19.1103 9.23461 18.5447 10.4673 17.6735 11.4683C17.5227 11.6416 17.3516 11.859 17.1739 12.1069L9.47856 6.12184C9.65443 5.45016 10.046 4.85578 10.5924 4.43118C11.1387 4.00657 11.8093 3.77554 12.4997 3.77401C12.6654 3.77401 12.8244 3.70776 12.9416 3.58984C13.0588 3.47191 13.1247 3.31197 13.1247 3.1452C13.1247 2.97843 13.0588 2.81849 12.9416 2.70057C12.8244 2.58264 12.6654 2.51639 12.4997 2.51639C11.6212 2.5173 10.7634 2.78383 10.0374 3.28141C9.31146 3.77899 8.75092 4.48463 8.42856 5.30674L6.39614 3.72646ZM6.39614 10.0841C6.64968 10.5817 6.96225 11.0465 7.327 11.4683C7.97231 12.2091 8.98169 13.7568 9.36645 15.0624C9.36645 15.0726 9.36919 15.0828 9.37075 15.093H12.8372L6.39614 10.0841ZM9.37466 16.3502V17.8574C9.37584 18.1045 9.44934 18.3458 9.58599 18.5511L10.2536 19.5607C10.3675 19.7335 10.5221 19.8753 10.7037 19.9734C10.8852 20.0715 11.0881 20.1229 11.2942 20.1231H13.7047C13.9107 20.1231 14.1135 20.0718 14.2951 19.9739C14.4766 19.876 14.6313 19.7345 14.7454 19.5619L15.4129 18.5511C15.5492 18.3451 15.622 18.1033 15.6223 17.8558V17.2581L14.4528 16.3502H9.37466Z"/>
            <path class="night" d="M0.131556 1.2363L0.898352 0.243172C0.948738 0.177883 1.01142 0.123229 1.08282 0.0823368C1.15423 0.0414448 1.23294 0.0151171 1.31446 0.00486006C1.39598 -0.00539702 1.47872 0.000617709 1.55793 0.0225602C1.63714 0.0445026 1.71127 0.0819422 1.77609 0.132737L24.7585 18.0039C24.8894 18.1062 24.9745 18.2567 24.9952 18.4221C25.0158 18.5876 24.9703 18.7545 24.8687 18.8862L24.1015 19.8794C24.0511 19.9446 23.9884 19.9992 23.917 20.0401C23.8457 20.0809 23.767 20.1072 23.6855 20.1175C23.6041 20.1277 23.5214 20.1217 23.4422 20.0998C23.363 20.0779 23.2889 20.0405 23.2241 19.9898L0.241322 2.1186C0.110489 2.01624 0.0254259 1.86578 0.00484145 1.70032C-0.015743 1.53486 0.0298368 1.36795 0.131556 1.2363V1.2363Z"/>
            </svg></p>
        </div>
    </label>
</div>
          </li>
          <li>
            <a href="./">
              <div class="left">
                Home
              </div>  
              <div class="right">
                <svg width="24px" aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g><rect x="83.534" y="40.929" width="3.997" height="20.071"/></g><path d="M16.466,41.931l33.548-25.123L92.81,48.877l2.396-3.198L50.015,11.814L4.794,45.679l2.396,3.199l5.279-3.954v42.763h75.062  V61h-3.997v22.69H64.598V54.068H35.402V83.69H16.466V41.931z M39.399,58.065h21.202V83.69H39.399V58.065z"/></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./archive.html">
              <div class="left">
                All Posts
              </div>
              <div class="right">
                <svg width="24px" aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="-3 3 64 64"><g><path d="M60.992,31.985c0-15.979-13-28.978-28.979-28.978c-15.994,0-29.006,12.999-29.006,28.978   c0,15.994,13.012,29.007,29.006,29.007v-2c-14.891,0-27.006-12.115-27.006-27.007c0-14.875,12.115-26.978,27.006-26.978   c14.876,0,26.979,12.103,26.979,26.978c0,8.945-4.479,17.329-11.804,22.338l0.874-10.062l-1.992-0.174l-1.135,13.071l13.042,1.136   l0.174-1.992l-9.183-0.799C56.443,50.079,60.992,41.321,60.992,31.985z"/><polygon points="33.014,12.682 31.014,12.682 31.014,32.398 39.811,41.224 41.227,39.812 33.014,31.572  "/></g></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./tags.html">
              <div class="left">
                Tags
              </div>
              <div class="right">
                <svg width="24px" aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g><path d="M75.244,15.066c-2.59,0-5.027,1.012-6.857,2.843c-3.781,3.785-3.778,9.94,0.002,13.724    c1.831,1.833,4.266,2.843,6.857,2.843s5.026-1.01,6.861-2.843c3.781-3.785,3.781-9.943-0.002-13.724    C80.275,16.076,77.838,15.066,75.244,15.066z M78.766,28.252c-1.871,1.869-5.129,1.869-6.996,0c-1.929-1.931-1.931-5.069-0.002-7    c0.934-0.934,2.175-1.448,3.498-1.448c1.322,0,2.564,0.515,3.5,1.448C80.691,23.183,80.691,26.321,78.766,28.252z M94.632,41.027    l0.005-28.872c0-3.745-3.05-6.792-6.792-6.792L58.973,5.368l-1.237-0.004c-1.893,0-4.75,0-6.617,1.869L7.008,51.342    c-1.06,1.059-1.645,2.467-1.645,3.966s0.583,2.908,1.644,3.968l33.717,33.717c1.058,1.06,2.467,1.645,3.966,1.645    s2.908-0.585,3.968-1.645l44.106-44.111c1.893-1.886,1.88-4.604,1.869-7.227L94.632,41.027z M90.022,46.139L45.913,90.25    c-0.654,0.65-1.792,0.652-2.443,0L9.752,56.532c-0.328-0.327-0.507-0.762-0.507-1.225c0-0.462,0.18-0.894,0.507-1.221    L53.861,9.976c0.676-0.674,2.284-0.731,3.874-0.731l1.237,0.004l28.872-0.004c1.604,0,2.909,1.306,2.909,2.911l-0.005,28.872    l0.005,0.642C90.76,43.585,90.769,45.392,90.022,46.139z"/></g></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./about.html">
              <div class="left">
                About
              </div>
              <div class="right">
                <svg width='24px' aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 846.66 846.66"><g><path d="M351.26 453.22c-276.42,134.06 -224.86,336.22 -224.73,336.8 6.03,25.41 -32.58,34.56 -38.6,9.15 -0.15,-0.65 -55.78,-219.32 218.87,-367.66 -60.98,-39 -100.02,-106.82 -100.02,-182.56 0,-119.6 96.95,-216.55 216.55,-216.55 119.6,0 216.55,96.95 216.55,216.55 0,75.74 -39.04,143.56 -100.02,182.56 274.65,148.34 219.02,367.01 218.87,367.66 -6.02,25.41 -44.63,16.26 -38.6,-9.15 0.13,-0.58 51.69,-202.74 -224.73,-336.8 -22.55,7.96 -46.8,12.29 -72.07,12.29 -25.27,0 -49.52,-4.33 -72.07,-12.29zm72.07 -381.14c-97.68,0 -176.87,79.19 -176.87,176.87 0,97.69 79.19,176.87 176.87,176.87 97.68,0 176.87,-79.18 176.87,-176.87 0,-97.68 -79.19,-176.87 -176.87,-176.87z"/></g></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./feed.xml">
              <div class="left">
                Atom feed
              </div>
              <div class="right">
                <svg width='24px' aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M80 352c26.467 0 48 21.533 48 48s-21.533 48-48 48-48-21.533-48-48 21.533-48 48-48m0-32c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80zm367.996 147.615c-6.448-237.848-198.06-429.164-435.61-435.61C5.609 31.821 0 37.229 0 44.007v8.006c0 6.482 5.146 11.816 11.626 11.994 220.81 6.05 398.319 183.913 404.367 404.367.178 6.48 5.512 11.626 11.994 11.626h8.007c6.778 0 12.185-5.609 12.002-12.385zm-144.245-.05c-6.347-158.132-133.207-284.97-291.316-291.316C5.643 175.976 0 181.45 0 188.247v8.005c0 6.459 5.114 11.72 11.567 11.989 141.134 5.891 254.301 119.079 260.192 260.192.269 6.453 5.531 11.567 11.989 11.567h8.005c6.798 0 12.271-5.643 11.998-12.435z"></path></svg>
              </div>
            </a>
          </li>
        </ul>
      </nav>
      
      
      <div class="logo"><a href="./"><img class="logo" id="logo" src="./assets/img/branding/YIlong_last_3.svg" alt="冷宜隆的博客"></a></div>
      <div class="search-icon-container">
        <span class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></span>
      </div>
    </div>
  </div>
</header> <!-- End Header -->

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads – 论文阅读">
<meta itemprop="description" content="近数据端处理">
<meta itemprop="datePublished" content="2024-04-18T05:45:00+08:00">

    <div class="page-image">
      <div class="cover-image" style="background: url('./assets/img/posts/20240421/FPGA.png') center no-repeat; background-size: cover;"></div>
    </div>
    <div class="wrapper">
      <div class="page-content">
        <div class="header-page">
          <h1 class="page-title">Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读</h1>
          

  <span class = "post-page-meta">
  
    <p class="page_meta">
  
  
  
    
      
      <span class="page_meta-date">
        <time datetime="2024-04-18T05:45:00+08:00">April 18, 2024</time>
      </span>
    
    
      <span class="meta-sep"></span>
    
  
  
    
    
    <span class="page_meta-readtime">
      
        5 minute read
      
    </span>
  
  
    </p>
  
  </span>

        </div>
        <aside class="sidebar side" id="sidebar">
    



<div class="tag-cloud">
    
        <ul class="tags side">
            
                <li><a href="./tag.html?tag=FPGA" class="tag side">FPGA</a></li>
            
                <li><a href="./tag.html?tag=HTAP" class="tag side">HTAP</a></li>
            
                <li><a href="./tag.html?tag=%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93" class="tag side">异构数据库</a></li>
            
    
        </ul>
</div>
    <div class="share-options side">
    <div class="share-hover side">
        <span class="share-button side"><svg fill="currentColor" width="25" height="25" class="side"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></span>
        <div class="share-icons side" id="sidebar-icons">
            <a class="twitter" href="https://twitter.com/intent/tweet?text=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读&url=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a class="facebook" href="https://facebook.com/sharer.php?u=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a class="reddit" href="http://www.reddit.com/submit?url=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html&title=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读" title="Submit to Reddit" rel="nofollow" target="_blank"><i class="fa fa-reddit" aria-hidden="true"></i></a>
            <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html&title=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读&summary=近数据端处理&source=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share on LinkedIn" rel="nofollow" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
            <a class="email" href="mailto:?subject=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读&body=近数据端处理%0A%0ARead more here: http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share via e-mail" rel="nofollow" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
            <a class="copy-link" onclick="copyToClipboard()" title="Copy to clipboard" rel="nofollow" target="_blank"><svg width="20px" fill="currentColor" class="side" viewBox="0 0 18 18"><path d="M16.94 1.1A3.7 3.7 0 0 0 14.3 0c-1 0-1.94.39-2.64 1.1L7.43 5.3c-.91.92-2.09 3.2 0 5.27a.75.75 0 0 0 .82.16c.09-.03.17-.09.24-.15a.74.74 0 0 0 0-1.06c-1.16-1.15-.77-2.39-.02-3.16l4.24-4.22a2.2 2.2 0 0 1 1.58-.65c.6 0 1.16.23 1.58.65.86.87.86 2.29 0 3.16L12.7 8.47a.74.74 0 0 0 1.04 1.05l3.17-3.16a3.73 3.73 0 0 0 0-5.27h.03zM9.54 7.4a.74.74 0 0 0 0 1.06c1.16 1.15.76 2.39 0 3.16l-4.22 4.22c-.42.42-.99.65-1.59.65a2.23 2.23 0 0 1-1.58-3.82l3.17-3.16A.73.73 0 0 0 5.54 9a.78.78 0 0 0-.22-.52.77.77 0 0 0-1.05 0L1.1 11.64A3.72 3.72 0 0 0 3.74 18c1 0 1.94-.39 2.65-1.1l4.23-4.2c.21-.22.94-1.02 1.13-2.2.18-1.12-.2-2.15-1.12-3.07-.27-.27-.78-.27-1.06 0l-.02-.02z" clip-rule="evenodd" fill-rule="evenodd"></path></svg></a>
        </div>
    </div>
    <div class='alert' style='font-size:.6em;color:var(--accent);text-align:center;'></div>
</div>
</aside>

        
        
<div class="center-container">
  <div class="github-button">
    <span class="button-icon" aria-hidden="true"><svg aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2.2467A10.00042,10.00042,0,0,0,8.83752,21.73419c.5.08752.6875-.21247.6875-.475,0-.23749-.01251-1.025-.01251-1.86249C7,19.85919,6.35,18.78423,6.15,18.22173A3.636,3.636,0,0,0,5.125,16.8092c-.35-.1875-.85-.65-.01251-.66248A2.00117,2.00117,0,0,1,6.65,17.17169a2.13742,2.13742,0,0,0,2.91248.825A2.10376,2.10376,0,0,1,10.2,16.65923c-2.225-.25-4.55-1.11254-4.55-4.9375a3.89187,3.89187,0,0,1,1.025-2.6875,3.59373,3.59373,0,0,1,.1-2.65s.83747-.26251,2.75,1.025a9.42747,9.42747,0,0,1,5,0c1.91248-1.3,2.75-1.025,2.75-1.025a3.59323,3.59323,0,0,1,.1,2.65,3.869,3.869,0,0,1,1.025,2.6875c0,3.83747-2.33752,4.6875-4.5625,4.9375a2.36814,2.36814,0,0,1,.675,1.85c0,1.33752-.01251,2.41248-.01251,2.75,0,.26251.1875.575.6875.475A10.0053,10.0053,0,0,0,12,2.2467Z"/></svg></span>
    <a class="button-text" href="https://github.com/zhangsan/cpp_basics/" target="_blank" aria-label="Open on GitHub">view on <b>GitHub</b></a>
  </div>
</div>

        <h1 id="near-data-processing-in-database-systems-on-native-computational-storage-under-htap-workloads">Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads</h1>
<h2 id="前置知识补充">前置知识补充</h2>
<h3 id="olap">OLAP</h3>
<p>OLAP是一种数据处理技术，专门设计用于支持复杂的分析操作，侧重对决策人员和高层管理人员的决策支持。OLAP的主要用途是分析聚合数据，生成报告，执行复杂的数据分析，确定趋势，以及支持商业智能应用。OLAP系统通常是数据仓库解决方案的中间分析层。</p>

<h3 id="oltp">OLTP</h3>
<p>OLTP则是一种事务处理，主要用于处理数据库事务。OLTP系统的主要用途是处理订单，更新库存，管理客户账户等面向事务的应用。OLTP系统旨在使事务应用程序仅写入所需的数据，以便尽快处理单个事务。</p>

<h3 id="htap">HTAP</h3>
<p>HTAP（Hybrid Transaction / Analytical Processing，混合事务分析处理）是一种新兴的应用体系结构，它打破了事务处理和分析之间的“墙”。它在一份数据上同时支持OLTP（联机事务处理）和OLAP（联机分析处理）场景，需要创新的计算存储框架，从而实现事务的同时支持实时分析，省去费时的ETL过程。</p>

<p>HTAP的主要优势是能够在同一份数据上进行事务处理和分析处理，这样可以避免数据同步和转换的延迟，提高数据处理的实时性和准确性。例如，电商、金融行业的订单、付款信息需要实时同步到结算库的库存数据进行结算对账，各渠道交易数据统计，精准资损防控，这些信息实际上就需要实现快速的数据同步，传统的ETL它无法做到这么快速。</p>

<p>HTAP应用列子：</p>

<p>假设你是一家全球电商公司的业务分析师，你需要处理大量的在线事务（例如订单处理、库存更新、客户服务等），同时还需要进行实时的业务分析（例如销售趋势、库存状态、客户行为等）。
在传统的架构中，你可能需要维护两个独立的系统：一个OLTP系统用于处理在线事务，另一个OLAP系统用于进行业务分析。这两个系统通常需要通过ETL（Extract, Transform, Load）过程进行数据同步，这不仅增加了系统的复杂性，也可能导致数据延迟和不一致12。
然而，如果你使用HTAP系统，你可以在同一份数据上同时进行在线事务处理和实时业务分析。例如，当一个新订单被创建时，它会立即被HTAP系统处理，并且这个新订单的信息会立即可用于业务分析。这样，你可以实时地看到新订单对销售趋势、库存状态等的影响。
此外，HTAP系统还可以帮助你简化技术栈，因为你不再需要维护两个独立的系统和进行ETL过程。这可以降低运维的复杂性和成本。</p>

<p>名词解释 – ETL，全称为Extract-Transform-Load，是一种数据处理过程，主要用于从多个数据源抽取数据，然后对这些数据进行转换和清洗，以满足特定的业务需求，最后将清洗后的数据加载到目标系统（如数据仓库）中。
以下是ETL的三个主要步骤：</p>
<ul>
  <li>提取（Extract）：从多个源系统中抽取所需的数据。这些源系统可以包括各种类型的数据库、文件系统、应用程序等。</li>
  <li>转换（Transform）：将提取出的数据进行清洗和转换，以满足目标系统的数据要求。这可能包括数据清洗、去重、格式转换、计算新的数据项等操作。</li>
  <li>加载（Load）：将转换后的数据加载到目标系统中。这通常涉及将数据插入到数据库表中，或者将数据写入到文件系统中。</li>
</ul>

<h3 id="cosmos">COSMOS+</h3>
<p>COSMOS+是一个开源硬件和软件平台，它是OpenSSD项目的一部分1。COSMOS+ OpenSSD平台包括以下组件：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HYU Tiger4 SSD控制器，由XC7Z045-FFG900-3 Zynq-7000 FPGA实现
双核1GHz ARM Cortex-A9核心
每个核心的Neon DSP协处理器
350K LCs
1GByte DDR3 SDRAM内存
双QSPI闪存
1个SD卡插槽
主机接口：双PCIe Gen2 x8端点（有线PCIe接口）
支持NVMe命令集的子集
连接性：1个千兆以太网接口，1个USB 2.0（可配置为主机或设备），控制台调试接口，1个USB-UART端口，1个ARM JTAG，1个PL JTAG，1个Digilent USB-JTAG1
</code></pre></div></div>

<h3 id="alveo-u280">Alveo U280</h3>
<p>Alveo U280是一款数据中心加速器卡，由AMD公司生产。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>架构：Alveo U280基于AMD 16nm UltraScale+™架构12。
内存：Alveo U280配备了8GB的HBM2和32GB的DDR4内存12。
带宽：Alveo U280能够以460 GB/s的带宽提供8GB的HBM212。
适用领域：Alveo U280适用于数据库、分析和机器学习推断等内存有限的计算密集型应用12。
接口：Alveo U280支持PCI Express 4.0，可为高带宽主机处理器利用最新的服务器互连基础设施12。
适应性：Alveo加速器卡能适应不断变化的加速要求和算法标准，能在不改变硬件的情况下，加速任何工作负载，并能降低总体拥有成本
</code></pre></div></div>
<h2 id="文章内容解析">文章内容解析</h2>
<h3 id="introduction">INTRODUCTION</h3>
<h4 id="data-to-code架构和code-to-data">data-to-code架构和code-to-data</h4>
<p>“Data-to-code”是一种数据处理模型，通常在传统的非HANA数据库中使用。当应用需要处理存储在数据库中的数据时，通常会将数据从数据库中取出，传输到应用服务器，然后在应用服务器上进行计算。这种模型的问题是，随着数据量的增长，数据从数据库到应用服务器的传输成为了一个瓶颈。</p>

<p>相反，在”code-to-data”模型中，我们将这些应用处理逻辑，编写为一个数据库查询或存储过程 (Store Procedure)，并将其发送到数据库服务器执行。数据库服务器将处理数据，并将结果返回给应用。这样，在应用服务器和数据库之间，只需要传输最终的结果，而不是原始的数据。这将显著减少数据传输的时间和网络带宽的使用。</p>

<p>总的来说，”data-to-code”和”code-to-data”是两种不同的数据处理模型，它们分别代表了数据处理的两种不同方法：一种是将数据带到代码（即应用服务器）进行处理，另一种是将代码带到数据（即数据库服务器）进行处理。</p>

<h4 id="activedisks">ActiveDisks</h4>
<p>Active Disks是一种计算模型，它将计算任务从主机服务器移动到存储设备，如硬盘驱动器。在Active Disks模型中，硬盘驱动器不仅仅是存储数据的设备，而且还能执行一些计算任务。这种模型的优点是可以减少数据在网络中的传输，从而提高数据处理的效率。
例如，假设你有一个大型数据库，并且你想要对数据库中的数据进行一些复杂的分析。在传统的模型中，你需要将数据从硬盘驱动器传输到主机服务器，然后在主机服务器上进行计算。但是，如果你使用Active Disks模型，你可以直接在硬盘驱动器上进行一些计算，比如过滤和聚合，然后只将结果传输到主机服务器。这样，你可以减少网络传输的数据量，从而提高数据处理的效率。</p>

<h4 id="database-machines">Database Machines</h4>
<p>“Database Machines”是一种专门设计用于处理数据库操作的硬件和软件系统。这些系统通常包括一组专门的硬件设备（如服务器、存储设备等）和一套数据库管理系统（DBMS），它们共同工作，以提供高效、可靠的数据库服务。</p>

<p>例如，Oracle的Exadata Database Machine就是一种典型的Database Machine。它包括高性能的数据库服务器、智能存储服务器和内部网络设备，这些设备都经过精心设计和优化，以提供最佳的Oracle数据库性能。Exadata Database Machine还包括一些先进的技术，如PCIe闪存、RDMA内存和RoCE内部网络，这些技术可以进一步提高数据库的性能和可用性。</p>

<p><img src="./assets/img/posts/20240421/WX20231211-231141@2x.png" alt="HTAP系统处理架构" /></p>
<h4 id="图的部分解读">图的部分解读</h4>
<ul>
  <li>数据新鲜度 – 在HTAP环境中，数据新鲜度通常指的是数据的实时性，即数据从产生到可用于分析的时间间隔。在传统的OLTP（联机事务处理）和OLAP（联机分析处理）系统中，数据通常需要经过ETL（提取、转换、加载）过程才能用于分析，这个过程可能需要数小时甚至数天，因此数据的新鲜度较低。而在HTAP系统中，由于事务处理和分析处理在同一系统中进行，数据可以在产生后立即用于分析，因此数据的新鲜度较高。</li>
  <li>性能隔离 – 在HTAP环境中，性能隔离通常指的是在同一系统中运行的事务处理和分析处理之间的资源隔离。由于事务处理和分析处理对资源（如CPU、内存、I/O等）的使用方式不同，如果不进行性能隔离，两者可能会相互干扰，影响系统的性能。通过性能隔离，可以确保事务处理和分析处理各自有足够的资源，从而保证系统的稳定运行。</li>
  <li>Data Transfer Reduction – 由于HTAP环境需要在同一份数据上同时支持OLTP（联机事务处理）和OLAP（联机分析处理）场景，因此数据需要在计算节点和存储节点之间频繁地进行读写。这会消耗大量的网络带宽，并成为系统性能的瓶颈。
为了解决这个问题，HTAP系统通常会采取一些策略来减少数据的传输量，这些策略可能包括数据压缩、数据去重、查询优化等。
    <h4 id="htap架构分类">HTAP架构分类</h4>
  </li>
  <li>统一存储 – 基于快照与MVCC在同一数据集上执行OLTP和OLAP技术</li>
</ul>

<p>快照技术的实现原理是，当进行快照时，系统会对原数据库的所有数据页做个标识，如果数据页在创建快照后被修改，会复制一个数据页出来，没有修改的数据页则不会有快照。</p>

<p>MVCC的主要思想是保存数据的历史版本，通过对数据行的多个版本管理来实现数据库的并发控制。这样我们就可以通过比较版本号决定数据是否显示出来，读取数据的时候不需要加锁也可以保证事务的隔离效果。</p>

<ul>
  <li>解耦存储 – 将OLAP与OLTP子系统分开，数据交换是通过网络进行的，计算节点和存储节点之间通过网络进行数据的读写。</li>
  <li>NDP存储 – NDP允许就地操作来处理冷数据，而无需将其移动到主机上。NDP自动化执行，在异步加载 NDP 操作并将其委托给计算存储执行后，数据库管理系统继续运行。</li>
</ul>

<h4 id="文章提出的问题">文章提出的问题</h4>
<h5 id="htap-架构会导致冷数据的传输olap的调用">HTAP 架构会导致冷数据的传输（OLAP的调用）</h5>
<p>问题解决方案 – NDP 天然地适用于 HTAP 问题空间（详见NDP存储部分内容）</p>
<h5 id="ndp-要求事务一致性">NDP 要求事务一致性</h5>
<p>问题描述 – NDP 目前主要在只读环境中使用。在更新密集型 HTAP 环境中OLTP (联机事务处理) 类型事务的最新修改只能在大型 DBMS (数据库管理系统) 的内存中获取（OLTP高并发，内存比硬盘快太多）。此外，从 OLAP (联机分析处理) 事务加载到计算存储的分析型 NDP 操作需要最新数据和冷持久数据集，以实现一致性和新鲜度保证。这是因为 NDP 操作是在调用事务的上下文中执行的，因此需要最新和一致的数据。
然而，如何收集最新数据并将其传播到智能存储，以及如何确保一致性和新鲜度？</p>

<h4 id="update-aware-ndp-做了什么">Update-aware NDP 做了什么？</h4>
<ul>
  <li>Update-aware架构 – 利用小型共享状态在计算存储上创建一致的快照，并针对快照就地执行分析 NDP 操作</li>
  <li>NDP执行模型 – NDP 存储能以无干预的方式异步执行操作。只读、分析型 NDP 操作 - 案例介绍了如何就地处理中间结果和最终结果，以减少数据传输，案例在两个不同系统中的实现：键值存储（nKV）和多版本 DBMS（neoDBMS）</li>
  <li>核心思想解读 – 共享状态是大型数据库管理系统内存中包含最新更新的工作集与计算存储中更大但更冷且更完整的数据集之间的唯一差值。这意味着共享状态是一个小型的、包含了所有最新更新的数据集，而计算存储则包含了更大规模但更新不那么频繁的数据集。
每当共享状态达到预先设定的限制时，共享状态就会定期刷新到计算存储中。这样，计算存储就能够获得完整一致的快照，只读 NDP 操作可以在保证一致性的情况下执行。此外，由于计算存储现在拥有整个数据集的完整快照，因此原位执行是异步的，无需数据库管理系统/主机干预。</li>
</ul>

<p><img src="./assets/img/posts/20240421//WX20231212-141457@2x.png" alt="NDP处理与传统处理方式" /></p>
<h4 id="图的部分解读-1">图的部分解读</h4>
<ul>
  <li>“Throughput [tx/s]” 是一个性能指标，用于衡量系统在单位时间内处理事务的数量。“tx/s” 是 “transactions per second” 的缩写，意为每秒事务数</li>
  <li>Buffer adjustment” 通常用于描述在处理数据流时对缓冲区大小或内容的调整
    <h4 id="实验解读">实验解读</h4>
    <h5 id="实验系统配置">实验系统配置</h5>
  </li>
  <li>传统 – 使用 MyRocks 存储引擎的 MySQL 数据库系统，MyRocks 是 Facebook 基于 Google 开源的 LevelDB 实现的 RocksDB 移植到 MySQL 上的结果。</li>
  <li>新型 – nKV 是一种基于 RocksDB 的键值 (KV) 存储系统。RocksDB 是一个由 Facebook 开发的开源键值存储库，它提供了高性能的数据持久化。
nKV 可以通过 MyRocks（MyRocks over nKV）作为 MySQL 存储引擎公开nKV 是一个单版本的系统，这意味着每个键只有一个关联的值，而不是多个版本的值。它使用写入即复制 (Write-Ahead Logging, WAL) 的策略，这是一种在修改数据之前先将修改操作记录到日志中的策略，可以提高数据的可靠性和完整性</li>
</ul>

<h3 id="background-and-related-work">BACKGROUND AND RELATED WORK</h3>
<h4 id="htap-工作负荷与系统">HTAP 工作负荷与系统</h4>
<ul>
  <li>数据新鲜度 – 对于 HTAP 工作负载的分析部分，给定的系统架构应力求拥有 OLTP 工作负载更新后的最新数据版本。因此，需要将这些更新快速传播到分析快照，并以最佳方式避免交易工作负载的性能下降</li>
  <li>数据一致性 – 无论数据是否新鲜，整个系统都必须确保其事务的事务性保证，以便事务性查询和分析性查询对数据有一致的看法。目前已经提出了各种机制，并在数据库中应用多版本并发控制来构建所谓的所需快照。其中最著名的两种方法是 “写时拷贝”（CoW）方法和 “多版本并发控制”（MVCC）方法。第一种方法通过为修改创建副本来确保旧版本的可见性。第二种方法是为每条修改过的记录创建一个新版本，并用当前时间戳对其进行扩展。</li>
  <li>数据传输 – 与分析引擎和事务引擎的分离无关，从存储层到主机处理单元的数据传输占整体性能的很大一部分。其原因是：(a) HTAP 同样处理冷数据和热数据；(b) 冷数据比热数据大得多，因此造成更多的污染和更高的驱逐率。总之，结果是可扩展性受限、带宽受限和性能损失。</li>
  <li>性能隔离 – DBMS 通常用于关键业务应用，其在延迟和吞吐量方面的强大性能至关重要。必须防止 OLTP 和 OLAP 工作负载之间的干扰，特别是在两者同时运行的混合方案中</li>
  <li>内存污染 – OLTP 工作负载在最先进的大型主存储器中的热数据（工作集）上运行，而 OLAP 处理的主要部分是超出存储器容量的冷数据。因此，在混合场景中进行 OLAP 扫描时，如果事务处理引擎和分析引擎共享相同的内存，如数据库内存或操作系统页面缓存和设备缓存，则不可避免地会造成内存污染。尽管 bu￿er 的大小通常被定义为大于数据集的热数据部分，但分析查询必须将大部分冷数据取到 bu￿er 中，从而导致热数据被驱逐。</li>
</ul>

<h4 id="near-data-processing">Near-Data Processing</h4>
<ul>
  <li>存储技术硬件特性 – 由于闪存、NVM 和 HBM 具有极高的并行接口，因此在 NDP 方法中得到了广泛应用。因此，与与主机的通信相比，可以实现更高的设备带宽。数据库扫描和连接的存储内处理一文中提出的设备内部带宽为 50 GB/秒，而设备与主机之间的带宽为 6.4 GB/秒。这是由于半导体存储设备的物理组织结构造成的，它涉及多个芯片，通过独立通道连接到设备上的处理元件。芯片级带宽随着芯片密度的增加而增加，而芯片密度的增加又得益于现代三维堆叠技术。同样，由于避免了通过多个操作系统层进行耗时的传输，并可高度定制并行存储实体的仲裁，减少了等待队列的负荷，从而降低了延迟。通常情况下，通常不会暴露给主机的底层接口（如多平面操作）可以进一步优化。</li>
  <li>NVM (Non-Volatile Memory) – 非易失性内存，是一种计算机存储器，其特点是在断电后所存储的数据不会消失。NVM 包括各种类型的内存设备，如闪存、EEPROM (电可擦除可编程只读存储器)、ROM (只读存储器) 等。NVM 的一个重要应用是 SSD (固态硬盘)，其中数据存储在闪存中</li>
  <li>HBM (High Bandwidth Memory) – 高带宽存储器，是一种新型的 CPU/GPU 内存芯片456。HBM 是三星电子、SK海力士、AMD 共同提出的基于 3D 堆栈工艺的高性能 DRAM，适用于高存储器带宽需求的应用场合，像是图形处理器、网络交换及转发设备（如路由器、交换器）等4。HBM 的优势在于其高吞吐高带宽。</li>
  <li>计算模型和计算布局 – 除存储技术外，如今的设备可能还包括各种异构处理元件，如 CPU、GPU 或 FPGA。单个计算可以传统地放在主机上，也可以放在设备上。如果是后者，还可以在异构硬件的不同处理元件之间拆分和分配处理。将计算从 ARM 内核转移到并行 FPGA 流水线可以进一步提高吞吐量，尤其是在大扫描时。根据实际操作、工作负载和底层存储技术等方面的情况，计算位置的决定可能会有所不同，可以为每次 NDP 调用单独配置硬件。本质上是在存储层实现数据库操作的弹性和下推，将计算节点的 CPU 资源与存储节点的 CPU 资源分离。本研究的目标是 NDP，它是以现场处理为目标的问题空间的一个独特子集。</li>
</ul>

<h4 id="native-storage">Native Storage</h4>
<p>本地存储在异构计算体系下通常将数据库功能下推到闪存中，此时影响数据存储引擎吞吐量的的指标为并行I/O单元的利用效率。</p>
<ul>
  <li>Channels：在计算机硬件中，通道 (Channel) 是一种传输数据的路径。在 NAND Flash 中，channel 表示有几组 ALE、CLE、IO [7:0]、DQS、RE、WE、WP 信号线</li>
  <li>LUNs：LUN (Logical Unit Number) 是逻辑单元号的缩写，它是在存储区域网络 (SAN) 或其他数据存储技术中用来标识设备或分区的一种方法23。在 NAND 中，LUN (Logical Unit) 和 die 是同一个意思，都是执行 cmd 和 report status 的最小单位
<img src="./assets/img/posts/20240421/WX20231212-232850@2x.png" alt="Storage organization under nKV and neoDBMS" />
    <h4 id="实验使用的两种系统介绍">实验使用的两种系统介绍</h4>
    <h5 id="图中内容一些名词解释">图中内容一些名词解释</h5>
    <h6 id="myrocks-over-nkv">MyRocks over nKV</h6>
  </li>
  <li>skiplist-based MemTable –是RocksDB中的一种内存数据结构，用于暂存数据，直到数据被刷新到SST文件中1。它为读写操作、随机访问和顺序扫描提供了良好的性能1。此外，它还提供了一些其他MemTable实现当前不支持的有用特性，如并发插入和带提示的插入。</li>
</ul>

<p>Skiplist是一种概率性的数据结构，支持SortedMap的所有功能，性能和红黑树相当。Skiplist每一个节点有一个随机产生的层数，从1层到N层。其实跳表就是在普通单向链表的基础上增加了一些索引，而且这些索引是分层的，从而可以快速地查的到数据。</p>

<p>以下是一个典型的跳表的示意图：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>level 3: 1 -----------------------------&gt; 9
level 2: 1 --------&gt; 4 ----------------&gt; 9
level 1: 1 --&gt; 2 --&gt; 4 --&gt; 6 ----------&gt; 9
level 0: 1 --&gt; 2 --&gt; 3 --&gt; 4 --&gt; 5 --&gt; 6 --&gt; 7 --&gt; 8 --&gt; 9 --&gt; 10
</code></pre></div></div>
<p>在这个示意图中，数字1-10代表节点的键值，箭头表示节点之间的链接，level表示索引的层级。高层级的索引覆盖了更大范围的节点，这使得查找效率得到了显著提高。</p>
<ul>
  <li>Sorted String Tables(SSTs) –Sorted String Tables (SSTs) 是一种持久化的文件格式，被 ScyllaDB, Apache Cassandra, 和其他 NoSQL 数据库用于将存储在内存中的数据（memtables）进行排序以便快速访问，并将其存储在磁盘上的一组持久、有序、不可变的文件集中123。”不可变”意味着一旦 SSTables 被创建，就永远不会被修改1。</li>
</ul>

<p>每个 SSTable 包含一系列的块（blocks），通常每个块的大小为 64KB，但这是可以配置的2。对于每个 SSTable，数据库会创建一个索引文件和一个数据文件1。索引文件帮助在排序的数据文件中更快地定位数据1。</p>

<p>SSTable 使用了一种名为 Log-Structured Merge (LSM) 的树形数据结构格式1。这种格式对于写入密集型、快速增长的、极大的数据集比传统的 B-tree 格式更有效率1。</p>

<p>以下是一个典型的 SSTable 的示意图：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+-------------------+
|   Block 1         |
+-------------------+
|   Block 2         |
+-------------------+
|   ...             |
+-------------------+
|   Block N         |
+-------------------+
|   Metaindex Block |
+-------------------+
|   Index Block     |
+-------------------+
</code></pre></div></div>

<p>在这个示意图中，每个块（Block）包含了一系列的键值对。Metaindex Block 存储了元数据信息，如过滤器（例如布隆过滤器）的信息。Index Block 是用于定位块的索引，它在 SSTable 被打开时加载到内存</p>
<ul>
  <li>write batch – 在RocksDB和MyRocks中，Write Batch是一种用于存储一组写入操作的数据结构。这些写入操作可以是插入（Put）、删除（Delete）或者更新（Update）。当一个事务被提交时，它的所有修改都会首先被写入到Write Batch中。</li>
</ul>

<p>然后，这个Write Batch会被写入到RocksDB位于内存中的MemTable中。MemTable本质上是一个SkipList，里面缓存的记录是有序的。和InnoDB一样，事务更改的数据（Write Batch）在提交前也会先写入Write Ahead Log（WAL），事务提交后，只需保证WAL已经持久化即可，MemTable中数据不需要写入磁盘上的数据文件中。</p>

<p>当MemTable大小达到阈值后（比如32MB），RocksDB会产生新的MemTable，原来的MemTable会变为只读状态（Immutable），不再接收新的写入操作。Immutable MemTable会被后台的Flush线程dump成一个sst文件。</p>

<p>总的来说，Write Batch是一种用于暂存一组写入操作的数据结构，它在事务提交时被写入到MemTable中，从而提高了数据库操作的效率。</p>

<p>以下是一个典型的 Write Batch 和 MemTable 的示意图：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+-------------------+
|   Write Batch     |
+-------------------+
|   Put(key, value) |
|   Delete(key)     |
|   Update(key)     |
+-------------------+
|
| Write to MemTable
V
+-------------------+
|   MemTable        |
+-------------------+
|   key1 -&gt; value1  |
|   key2 -&gt; value2  |
|   ...             |
+-------------------+
</code></pre></div></div>
<p>在这个示意图中，Write Batch 包含了一系列的写入操作，包括插入（Put）、删除（Delete）和更新（Update）。当事务提交时，这些操作会被写入到 MemTable 中。</p>
<h6 id="neodbms">neoDBMS</h6>
<p>neoDBMS – a multi-version NDPDBMS based on PostgreSQL.</p>

<p>RecordID – &lt;PageNr,SlotNr&gt; 实体化版本记录唯一隐式标识符</p>

<p>new to old – 可以理解为一种数据处理方式，新数据会优先于旧数据被处理</p>

<p>VID – 所有版本记录在同一条链中时使用同一个Virtual id</p>

<p>图中标红的两条记录为快照开始的时间戳对应的记录。</p>

<h3 id="update-aware-ndp-architecture">UPDATE-AWARE NDP ARCHITECTURE</h3>
<p><img src="./assets/img/posts/20240421/WX20231213-153325@2x.png" alt="整体架构图" /></p>
<ul>
  <li>UPDATA-AWARE核心解决的问题为 – 在频繁更新事务的情况下确保事务保证的同时，为需要读取设备上大量冷数据的只读 HTAP 操作（例如带有大量扫描的复杂查询）的处理提供方便。</li>
  <li>通过定义小型共享状态来保证只读操作的一致性，共享状态会作为每次 NDP 调用的一部分进行传播。因此，在传播时，计算存储会获得完整且事务一致的原位快照，只读 NDP 操作可以在保证一致性的情况下执行。唯一需要注意的是，NDP 处理必须从共享状态开始，然后才转到冷数据，因为冷数据中的数据项可能已被前者中的 “更新版本 “作废。
<img src="./assets/img/posts/20240421/WX20231213-154712@2x.png" alt="共享状态" /></li>
  <li>A – 传统NDP架构不能处理热数据的原因，如果缓冲池中的数据相较于SSD中的数据更新，那么在SSD上执行查询处理可能会得到过时的数据，无法将查询处理下推到SSD中。</li>
  <li>B – shared State大小几百KB至几MB间，以增量方式累积对最新数据、映射表、状态或系统信息修改，并将它们放在Shadow Data Structures中（Shadow Data Structures是一种数据结构，它们在某些情况下用于优化数据处理。例如，Shadow Array是一种实现动态可调整大小的抽象数据类型（如List、Queue或Stack）的方法），统称为共享状态。</li>
  <li>B – Delta Buffer,在多版本的数据库管理系统（DBMS）中，Delta-Buffer会积累由活动事务新创建的版本，而前任版本则保留在内存中，可以被并发事务访问。在单版本的数据库管理系统（如RocksDB）中，Delta-Buffer包含替换记录。</li>
</ul>

<p>B – 关于Delta-Buffer相关资料</p>

<p>在SAP HANA中，”Delta-Buffer”指的是其Delta Merge操作的一部分。在SAP HANA中，所有的写操作都首先写入Delta存储，然后通过Delta Merge操作将数据转移到主存储。这个过程涉及到两个Delta存储（Delta 1和Delta 2）和两个主存储（Main 1和Main 2），以确保在合并操作期间，读写操作都可以正常进行。</p>

<p>在Multi-version DBMS中，”Delta-Buffer”指的是用于存储不同版本数据的缓冲区。在多版本并发控制（MVCC）中，每个数据项可能存在多个版本，每个事务都针对包含所有当前可见元组版本的数据库快照进行操作。</p>

<p>在RocksDB中，”Delta-Buffer”指的是其写缓冲区。RocksDB允许在内存中同时保持多个写缓冲区，以控制内存使用。此外，RocksDB还支持二级缓存，该缓存可以在非易失性介质（如本地闪存设备或NVM/SCM）上实现块缓存。</p>
<h4 id="共享状态传播模式">共享状态传播模式</h4>
<h5 id="常规模式--flushappend">常规模式 – Flush&amp;Append</h5>
<p>由共享状态的刷新触发</p>
<ol>
  <li>刷新的状态被预先准备好，包含已提交事务的数据，相应的日志记录也被提前写出。</li>
  <li>基于DBMS控制的地址映射，在刷新之前，由本地存储管理器分配非相邻物理页面。</li>
  <li>所有共享状态页面被刷新到存储并写入到这些分配的位置。因此，刷新到持久存储被实现为逻辑追加，放置在预先分配的非相邻位置。（可以对页面进行轻量级的压缩）</li>
  <li>当所有页面成功写入时，存储管理器才会原子地交换地址映射条目。否则，所有预先分配的地址映射都会被取消，相应的位置将被标记随后进行垃圾收集，并且过程重复。</li>
</ol>

<p>注意！！！ — 地址映射也被原子地合并，合并只在活动的NDP操作完成后进行。</p>
<h5 id="pass-along--cache">Pass Along &amp; Cache</h5>
<ol>
  <li>当NDP被调用时，共享状态被快照并传播到存储设备，同时也传播了当前正在进行的事务列表。这部分状态只是在调用期间被设备缓存，并在调用完成后被释放或垃圾收集。</li>
  <li>最大的共享状态大小配置为小于NDP设备的内存限制，确保设备有足够的内存来缓存共享状态。</li>
  <li>将共享状态应用到持久存储通常是困难的，因为它可能包含调用事务的修改，但是我们不知道这个事务是否会提交。此外，由于其空间利用率可能较低，因此可能会对连续的空间管理操作（如压缩和垃圾收集）产生开销。</li>
  <li>NDP操作可以以无共享的方式执行，无需与主机进行任何干预或同步。DBMS和设备可以独立操作，并且只在最后同步。
    <h4 id="ndp-transaction-management">NDP Transaction Management</h4>
    <p><img src="./assets/img/posts/20240421/WX20231213-190008@2x.png" alt="事物准入机制" />
事务一致性 – 规定来自 NDP 事务的 NDP 操作必须只处理在其开始之前提交的事务的修改</p>
  </li>
</ol>

<p>问题 – 在调用 NDP 时，并发事务是提交还是中止都是未知的，因此哪些记录应该被处理也是未知的。在MySQL/MyRocks中，规定可见的记录是在NDP调用（创建快照）之前最后提交的，而不是NDP事务开始时的。因此，来自TX2的修改可能对TX3NDP有关，但不会出现在设备上。</p>

<p>解决方案 – 事务准入机制，每当这样的NDP事务到达（例如，TX3NDP），它会像往常一样被分配一个事务时间戳。然而，它的准入被延迟，直到所有在它到达时正在进行的事务完成后。TX3NDP至少有快照隔离保证。
<img src="./assets/img/posts/20240421/WX20231213-192410@2x.png" alt="事物保证" />
确保共享状态和 delta-buffer 只包含所有先前启动的事务的事务一致性数据.</p>

<p>NDP_EXEC – 调用NDP进行共享状态传播
<img src="./assets/img/posts/20240421/WX20231213-195631@2x.png" alt="不同系统中的现场原位快照" /></p>
<h5 id="in-situ-snapshot-construction实现">In-situ Snapshot Construction实现</h5>
<h6 id="copy-on-write-机制">Copy-on-Write 机制</h6>
<p>在基于 Copy-on-Write 的系统（如 nKV）中，快照通常通过快照标识符（例如，序列号）来识别。在处理过程中，只需跳过具有较新标识符的记录。这是可能的，因为写入批处理机制确保 delta-buffer 只提交数据。例如，在 nKV 下，NDP 事务和调用获得序列号 0x1001，而就地快照包括键 k1 和 k2，因为序列号为 0xFFFF 的 k1 由于其组件级别较低而被跳过</p>
<h6 id="多版本-dbms-中的可见性检查">多版本 DBMS 中的可见性检查</h6>
<p>在像 neoDBMS 这样的多版本系统中，会执行就地可见性检查。为此，共享状态还包括版本链信息和 NDP 调用时的在途事务列表。给定调用事务 id，可见性检查现在可以从 VID_map 入口点开始向后遍历版本链，以找到对 NDP 事务可见的版本。我们利用最新到最旧的顺序，从而可以确保对新数据进行快速的可见性检查。</p>

<p>此处内容看不太懂可以对照前面的本地存储系统看一看就明白了。。。</p>

<h5 id="ndp-interface">NDP Interface</h5>
<p>为实现 NDP 命令的高效下推，扩展了本地存储的精简接口定义，原生 NVMe 利用 SPDK 。</p>
<ul>
  <li>接口设计</li>
</ul>

<p>Native storage允许通过读/写/擦除命令直接在物理内存上操作，而无需任何中间层。通过 NVMe 有效载荷向设备传输当前共享状态的命令扩展了该接口。此外，NDP_EXEC 命令扩展可向设备发送参数集，并可触发各种可执行功能NDP_EXEC 命令扩展可向设备发送参数集，并可触发各种可执行功能。其参数集包括 (1) 共享状态，以及 (2) 操作特定参数。此外，还包括元数据和模式信息，即“Column Families”及其各自的数据格式、LSM 层数、每层 SST 分配等。</p>

<p>Column Families：在一些NoSQL数据库中，如HBase，”Column Families”是一种数据组织方式，每个”Column Family”包含了一组相关的列。”Column Families”可以被指定给某个 locality group，决定了该列族数据的物理位置，从而可以让同一主键的各个列族分别存放在最优的物理节点上。由于 column family 内的数据通常具有相似性，对它做压缩要比对整个表压缩效果更好。</p>
<ul>
  <li>Native integration</li>
</ul>

<p>NDP 接口与 DBMS 深度集成。对整个堆栈进行了优化，以避免内存拷贝（零拷贝方法）。对计算存储的调用可通过中央轮询管理器同步发出，或通过回调函数异步发出。逻辑地址到物理地址的映射由存储管理器维护，并在每次 I/O 时即时更新。无效页面（如压缩后）会被标记，以便日后进行垃圾回收</p>
<h5 id="parsers-and-accessors">Parsers and Accessors</h5>
<p><img src="./assets/img/posts/20240421/WX20231213-210229@2x.png" alt="解析访问过程" />
NDP需要在设备上访问和解释持久性二进制数据，而无需与主机进行任何交互。为此，设备上必须存在模式和数据字典信息，并且在NDP调用中传播这些信息。这些信息包括DBobjects（数据库对象）的信息，例如它们的列、类型、大小或物理表示。</p>

<p>在设备上，NDP基础设施使用模式信息来支持用于原位导航的数据布局访问器，以及用于数据解释的格式解析器还引入了物理页面指针来减少大地址映射的开销。</p>

<p>数据布局访问器存在于持久数据布局的每个元素中，帮助导航二进制数据组织并访问子元素。例如，对于给定的键（如图所示），访问器允许通过SST的索引块导航到数据块内记录的物理位置。访问器的实现相对简单，其微架构类似于加载单元。它们可以多次实例化以增加并行性。</p>

<p>格式解析器负责处理原位导航，而访问器则需要提取持久二进制元素（记录、值），对它们进行语义解释，并允许进一步处理、数学运算或比较。我们实际上区分了字段、记录和页面的格式和布局以实现此目的。</p>

<p>例如，在MyRocks中，LSM-Tree基于数据组织的每个元素（如图右侧所示）都对应于特定的解析器和访问器。索引块根据其格式进行解释，并提取指向数据块的物理页面指针。同样，数据块由相应的解析器和访问器处理以获取实际记录，这些记录本身包含元素，例如（a）标识符，包括column_family_id、所有主键字段、序列号和键/值类型；（b）根据DDL定义格式化的实际值。</p>

<p>生成过程中，解析器和访问器并不一定是静态的。由于格式和布局是声明性的，因此可以自动生成解析器和访问器作为软件和/或硬件对应项，以支持异构硬件和模式演化。</p>

<p>物理页面指针：在本地存储下，数据库管理系统对物理存储有直接控制，并管理逻辑到物理的地址映射。然而，NDP执行也需要原位的地址信息，用于设备上的地址解析和无干预执行。这种信息的传播会产生高同步开销。例如，对于1 TB的存储，页面级地址映射的大小可能达到1 GB。为此，我们引入了物理页面指针（PPP，见图），它补充了解析器和访问器，使得持久数据集内的任何引用都基于PPP。它们被设计用于追加式存储（例如，使用LSM-Tree1213或分区B-Tree），因为持久数据是不可变的，只能通过数据库管理系统控制的存储维护（即垃圾收集、压缩）进行修改。PPP消除了原位地址解析和地址映射同步的开销。后者仍然被维护，但只在数据库管理系统内部。例如，SST的索引块使用PPP解析器和访问器引用数据块（见图）。相比之下，传统的数据库管理系统主要使用文件和它们内部的偏移，这需要设备上的地址映射进行原位导航。要处理SST文件（见图），数据库管理系统提取文件的地址映射（1），加载（2）并处理（3）索引块（4）。对于每个索引块条目，数据库管理系统解析（5）数据块的地址并加载（6）</p>

<p>相关知识补充 –</p>

<ol>
  <li>在存储系统中，“PPN”通常是”Physical Page Number”的缩写。这是一种用于内存管理的技术，它将物理内存划分为固定大小的块，每个块被称为一个”page”。每个page都有一个唯一的”Physical Page Number”，用于标识和引用该page。</li>
</ol>

<p>例如，在RISC-V中，物理内存地址是56bit，其中44bit是物理page号（PPN，Physical Page Number），剩下12bit是offset完全继承自虚拟内存地址（也就是地址转换时，只需要将虚拟内存中的27bit翻译成物理内存中的44bit的page号，剩下的12bitoffset直接拷贝过来即可）
<img src="./assets/img/posts/20240421/WX20231213-233327@2x.png" alt="NDP——pipelines" /></p>

<p>!!! – 仅允许非减小大小的操作，如连接或分组，原位物化它们的结果以减少数据传输</p>

<p>规划器和存储管理器采用一种分配策略，首先针对设备内存层次结构的快速级别，即静态FPGA内存，如BRAM或URAM，然后是快速的片上HBM，和片外DRAM。如果这些资源不足，就应用一种物化和溢出到持久存储（例如，NVM或Flash）的策略。每个物化阶段都被本地存储管理器分配一个独占的物理地址范围。这可能是哈希连接分区，或者具有大量组的聚合的情况。如果在执行过程中发现空间不足，管道会停滞，计算存储会在额外的往返中向DBMS请求更多的空间。</p>

<p>本地存储DBMS直接控制存储，管理逻辑到物理地址的映射，并执行垃圾收集。它为管道中的每个物化阶段分配并分配独占的物理地址范围。因此，DBMS确保其他事务、管道或NDP操作不会在同一存储空间中重叠。地址范围在执行期间保留，直到调用事务完成。作为其完成后的提交/回滚处理的一部分，DBMS将它们标记为GC，并安排一个异步GC调用。</p>

<h2 id="experimental-evaluation">EXPERIMENTAL EVALUATION</h2>

<h3 id="实验设置">实验设置</h3>
<ol>
  <li>
    <p>基于MyRocks的，以nKV作为存储管理器，除非另有说明，否则将使用它。主机运行的是Debian 4.9操作系统，配备了一个3.4 GHz的Intel i5 CPU和4 GB的RAM。COSMOS+板通过PCIe Gen 2.0⇥8连接，并包括一个带有FPGA的Zynq 7045 SoC，两个667 MHz的ARM A9核心，以及一个配置为SLC的MLC Flash模块。在价格和资源方面，COSMOS+大致等同于消费级NVMe SSD或智能存储设备（例如，Samsung SmartSSD）。具体的配置取决于评估堆栈。MyRocks（MySQL 5.6）配置为Repeatable Read，因为不支持Serializable。除非另有说明，否则内存占用设置为数据集大小的7.5%（包括400 MB的块缓冲区），并且可变的memtables配置为32 MB。</p>
  </li>
  <li>
    <p>neoDBMS，基于PostgreSQL12，并在ARM Neoverse N1系统开发平台（SDP）上作为主机运行，配备4个2.6 GHz的ARM N1-CPU和3 GB的RAM。一个带有2 GB DDR4的Xilinx Alveo U280 FPGA板，通过PCIe Gen4⇥8连接，作为企业级智能存储。</p>
  </li>
</ol>

<h4 id="参数控制">参数控制</h4>
<ol>
  <li>OLTP_SKEW – 设置热到冷数据访问的比率</li>
  <li>OLAP_SEL – 通过在NODE表的类型上过滤（正态分布）</li>
  <li>OLAP_PAUSE – 控制两次OLAP查询注入之间的时间。由于COSMOS+上ARM核心的数量有限（一个用于I/O，另一个用于NDP），OLAP工作负载目前只限于顺序执行</li>
</ol>

<p><img src="./assets/img/posts/20240421/WX20231214-011030@2x.png" alt="实验1" /></p>

<p>实验HTAP工作负载 – OLAP_PAUSE = 100s OLTP_SKEW =40%</p>

<p>A – 执行了带有HTAP扩展的LinkBench，它在Block、Native和NDP堆栈上运行。由于I/O增加和相关的缓冲区污染，OLAP查询期间的吞吐量下降</p>

<p>B – 放大了一个下降的细节</p>

<p>本地和块基线在注入OLAP查询时都表现出显著的性能下降。这是由于读I/O的数量增加，因为OLAP执行的冷数据必须从存储中获取。相比之下，由于原位OLAP执行，NDP堆栈中没有缓冲区丢失。OLAP处理会导致显著的缓冲区污染，因为热OLTP工作集页面被驱逐以腾出空间给冷数据。即使在OLAP处理完成并切换回OLTP工作负载后，缓冲区恢复并保留内存中的热OLTP工作数据集也需要时间</p>

<p>Spikes due to compaction – 压缩操作的主要目的是重新组织和优化数据，减少存储空间的使用，提高查询效率。然而，压缩操作本身需要读取、写入、排序大量数据，消耗较多的I/O和CPU资源。因此，在压缩操作进行时，可能会导致数据库的性能出现短暂的下降。
<img src="./assets/img/posts/20240421/WX20231214-011212@2x.png" alt="实验2" /></p>

<p>在OLAP查询之后，由于缓冲区保留了热数据集，缓存未命中（虚线）减少。OLTP吞吐量（实线）恢复到原始水平的缓冲区恢复时间（实箭头）取决于缓冲区的大小。</p>

<p><img src="./assets/img/posts/20240421/WX20231214-011249@2x.png" alt="实验3" /></p>

<p>实验HTAP工作负载 – OLAP_PAUSE = 1000s</p>

<p>在主机上进行OLAP处理会因为I/O等待时间而降低CPU性能。通过利用设备上的功能，NDP可以健壮地利用主机资源。观察到在本地堆栈的OLAP阶段，CPU利用率显著下降。这是由于CPU停滞，等待I/O从存储中获取冷数据进行仅主机HTAP处理。使用NDP，这些下降被最小化，因为OLAP处理被卸载到计算存储，而原位执行是异步的和无干预的。因此，空闲的主机CPU资源被用于并发OLTP处理，因为工作OLTP数据集通常适合内存。此外，NDP利用了否则会闲置的存储设备资源。特别是，我们利用了COSMOS+的两个ARM核心，FPGA，并利用了全Flash并行。此外，无干预的NDP转化为强大的事务吞吐量</p>

<p><img src="./assets/img/posts/20240421/WX20231214-011315@2x.png" alt="实验4" /></p>

<p>A – 执行BC作为OLAP工作负载可以避免OLTP吞吐量的下降
B – 随着选择性和OLAP运行时间的增加。
尽管在设备上的JOIN/GROUP BY查询较慢，但NDP在OLTP下优于native/block.
C,D本质上是更好的利用了CPU的并行性</p>

<p><img src="./assets/img/posts/20240421/WX20231214-011624@2x.png" alt="实验4" /></p>

<p>A B – 具有更大主机内存占用
C D – 具有更多逻辑核心。</p>

<p><img src="./assets/img/posts/20240421/WX20231214-011711@2x.png" alt="实验4" /></p>

<p>A – 处理BC，Native和NDP的性能优于Block。
B – 更多的邻居产生更多的NDP I/O。
C – 主机设备的数据传输显著减少。
在JOIN/GROUP BY/AGGR查询D，E，F中可以看到类似的效果</p>

<ol>
  <li>
    <p>upware-NDP 减少数据传输：NDP 的一个主要优点是数据在其物理存储位置附近进行处理，从而减少了昂贵的数据传输。为了量化这种效果，我们在每个堆栈上独立执行只读的 OLAP 操作。</p>
  </li>
  <li>
    <p>改变选择性：增加由 BC 处理的邻居数量，以及来自实验 3 的 OLAP 查询的 Join/Grouping 节点数量。</p>
  </li>
  <li>
    <p>本地堆栈基线优于块：图 17.A 清楚地显示，本地堆栈基线在所有设置下都优于块。这是由于更精简的 I/O 堆栈，减少了需要读取和传输到主机的数据量，以及由于先进的本地 NVMe 存储管理器，减少了 I/O 延迟（图 B/C）。</p>
  </li>
  <li>
    <p>NDP 改善 OLAP 运行时间：然而，对于较少数量的邻居（5K，10K），NDP 提高了 OLAP 运行时间，比本地提高了 52%，比块提高了 48%。随着邻居数量的增加，分析操作中最近邻搜索的数量也会增加，算法需要重新访问的节点数量也会增加。这种行为大大受益于大缓冲区，这是商品计算存储设备的主要限制，考虑到 COSMOS+ DRAM 容量的限制。</p>
  </li>
  <li>
    <p>缓冲区未命中导致更多的 Flash 读取：因此，设备上的缓冲区未命中导致 NDP 相对于本地和块有更多的 Flash 读取（见图 B）。尽管有这些限制，图 C 清楚地表明，设备到主机的数据传输可以显著减少。</p>
  </li>
  <li>
    <p>NDP 性能较低：图 D 显示了在相同条件下执行上一实验 的 OLAP 查询的执行时间。NDP 性能较低是由于 NDP BNL-JOIN 的计算受限，但也是由于其 I/O 强度（图 E），这是预期的，因为设备上的 join 缓冲区较小。然而，整个 NDP 管道都是减小尺寸的，保持主机传输的数量较低（图 F）。</p>
  </li>
  <li>
    <p>NDP 进一步减少了到主机的数据传输，但受到设备上的处理能力（ARM）明显弱于主机 CPU 的限制。</p>
  </li>
</ol>

<p><img src="./assets/img/posts/20240421/WX20231214-011754@2x.png" alt="实验4" /></p>

<p>A – NDP在低开销的情况下操作新数据。
B – 传输时间由于C小的delta-buffer大小而较短。</p>

<ol>
  <li>
    <p>up-NDP 可以操作新鲜数据：NDP 的一个主要优点是可以在支持事务保证的同时操作新鲜数据，但这是以将共享状态传输到计算存储为代价的。</p>
  </li>
  <li>
    <p>量化开销：通过执行带有和不带有共享状态传输的 HTAP 实验来量化这种开销。我们改变 opsl_sel 来达到不同的共享状态大小。</p>
  </li>
  <li>
    <p>OLAP 执行时间：图 A 显示了两种设置下的平均 OLAP 执行时间。这个执行时间被分解（图 B）为共享状态传输到设备的时间，以及后续的处理时间，这些都是以对数尺度表示的。</p>
  </li>
  <li>
    <p>共享状态的大小：图 C 显示了这些分解的平均共享状态大小。共享状态传输的时间只有 1 秒，占总执行时间的一部分（0.7%）。</p>
  </li>
  <li>
    <p>不同的共享状态大小：由于并行 OLTP 更新活动，共享状态的大小不同：较低的 OLAP_SEL 导致较低的 OLAP 运行时间和更多的 OLTP 事务，从而产生更多的更新和更大的共享状态。</p>
  </li>
  <li>
    <p>控制传输开销：共享状态的大小，因此传输开销可以通过配置参数来控制。剩余的部分是由于依赖操作的新鲜数据处理。</p>
  </li>
  <li>
    <p>BC 的执行时间：由于 BC 的执行时间取决于输入节点的数量和 OLAP_SEL，所以在两种情况（带有和不带有共享状态传播）之间的差距随着选择性的增加而增加。</p>
  </li>
</ol>

<p>尽管共享状态增加了从主机到设备的数据传输，但时间开销可以忽略不计：占分析查询的总 NDP 执行时间的 0.7%。</p>

<p><img src="./assets/img/posts/20240421/WX20231214-011819@2x.png" alt="实验4" /></p>

<p>A – 在neoDBMS中，由于N2O的存在，检索最新的元组版本会产生开销。
B – 通过利用设备上的并行性，加快了对前驱版本的访问速度。</p>

        <aside class="sidebar inline" id="post-end">
    



<div class="tag-cloud">
    
        <ul class="tags inline">
            
                <li><a href="./tag.html?tag=FPGA" class="tag inline">FPGA</a></li>
            
                <li><a href="./tag.html?tag=HTAP" class="tag inline">HTAP</a></li>
            
                <li><a href="./tag.html?tag=%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93" class="tag inline">异构数据库</a></li>
            
    
        </ul>
</div>
    <div class="share-options inline">
    <div class="share-hover inline">
        <span class="share-button inline"><svg fill="currentColor" width="25" height="25" class="inline"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></span>
        <div class="share-icons inline" id="post-end-icons">
            <a class="twitter" href="https://twitter.com/intent/tweet?text=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读&url=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a class="facebook" href="https://facebook.com/sharer.php?u=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a class="reddit" href="http://www.reddit.com/submit?url=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html&title=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读" title="Submit to Reddit" rel="nofollow" target="_blank"><i class="fa fa-reddit" aria-hidden="true"></i></a>
            <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html&title=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读&summary=近数据端处理&source=http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share on LinkedIn" rel="nofollow" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
            <a class="email" href="mailto:?subject=Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读&body=近数据端处理%0A%0ARead more here: http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" title="Share via e-mail" rel="nofollow" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
            <a class="copy-link" onclick="copyToClipboard()" title="Copy to clipboard" rel="nofollow" target="_blank"><svg width="20px" fill="currentColor" class="inline" viewBox="0 0 18 18"><path d="M16.94 1.1A3.7 3.7 0 0 0 14.3 0c-1 0-1.94.39-2.64 1.1L7.43 5.3c-.91.92-2.09 3.2 0 5.27a.75.75 0 0 0 .82.16c.09-.03.17-.09.24-.15a.74.74 0 0 0 0-1.06c-1.16-1.15-.77-2.39-.02-3.16l4.24-4.22a2.2 2.2 0 0 1 1.58-.65c.6 0 1.16.23 1.58.65.86.87.86 2.29 0 3.16L12.7 8.47a.74.74 0 0 0 1.04 1.05l3.17-3.16a3.73 3.73 0 0 0 0-5.27h.03zM9.54 7.4a.74.74 0 0 0 0 1.06c1.16 1.15.76 2.39 0 3.16l-4.22 4.22c-.42.42-.99.65-1.59.65a2.23 2.23 0 0 1-1.58-3.82l3.17-3.16A.73.73 0 0 0 5.54 9a.78.78 0 0 0-.22-.52.77.77 0 0 0-1.05 0L1.1 11.64A3.72 3.72 0 0 0 3.74 18c1 0 1.94-.39 2.65-1.1l4.23-4.2c.21-.22.94-1.02 1.13-2.2.18-1.12-.2-2.15-1.12-3.07-.27-.27-.78-.27-1.06 0l-.02-.02z" clip-rule="evenodd" fill-rule="evenodd"></path></svg></a>
        </div>
    </div>
    <div class='alert' style='font-size:.6em;color:var(--accent);text-align:center;'></div>
</div>
</aside>

        <div class="separator"></div>
        



<section class="author-box">
  <div class="narrow-column">
    <a href='https://Lengxiaoyi.github.io'><img src="./assets/img/Myself_Neon.jpg" alt="冷宜隆" class="author-img"></a>
    <ul class="contact-icons">
      
      <li class="twitter"><a class="twitter" href="https://twitter.com/@MvmThe" target="_blank"><i class="fa fa-twitter"></i></a></li>
      
      
      <li class="linkedin"><a class="linkedin" href="https://in.linkedin.com/in/amaynez" target="_blank"><i class="fa fa-linkedin"></i></a></li>
      
      
      <li class="github"><a class="github" href="http://github.com/amaynez" target="_blank"><i class="fa fa-github"></i></a></li>
      
      
      <li class="email"><a class="email" href="mailto:lengyilong0513@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
      
      
      <li class="stackoverflow"><a class="stackoverflow" href="https://stackoverflow.com/users/stackoverflow"><i class="fa fa-stack-overflow"></i></a></li>
      
    </ul>
  </div>
  <div class="author-desc">
    <h3>冷宜隆</h3>
    <p>立即停止战争!</p>
  </div>
</section>

        



<div class="recent-box">
  <h2 class="page-subtitle">Recent posts</h2>
  <div class="recent-list">
    
      
        <div class="recent-item">
          
          

          <a href="./C++%E7%BC%96%E7%A8%8B.html" class="recent-item-img" style="background: url('./assets/img/posts/20240420/cpp_basics.png') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>C++ 基础教程：变量和数据类型</span>
              

  <span class = "recent-item-meta">
  
  
  
  
    
    
    <p class="page_meta-readtime">
      
        less than 1 minute read
      
    </p>
  
  
  </span>

            </div>
          </a>
        </div>
      
    
      
        <div class="recent-item">
          
          

          <a href="./B+%E6%A0%91.html" class="recent-item-img" style="background: url('./assets/img/posts/20240419/B+ tree.png') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>B+树实现</span>
              

  <span class = "recent-item-meta">
  
  
  
  
    
    
    <p class="page_meta-readtime">
      
        2 minute read
      
    </p>
  
  
  </span>

            </div>
          </a>
        </div>
      
    
      
        <div class="recent-item">
          
          

          <a href="./RSA.html" class="recent-item-img" style="background: url('./assets/img/posts/20240418/RSA.png') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>RSA算法详解</span>
              

  <span class = "recent-item-meta">
  
  
  
  
    
    
    <p class="page_meta-readtime">
      
        1 minute read
      
    </p>
  
  
  </span>

            </div>
          </a>
        </div>
      
    
      
        <div class="recent-item">
          
          

          <a href="./FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html" class="recent-item-img" style="background: url('./assets/img/posts/20240421/FPGA.png') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>Near-Data Processing in Database Systems on Native Computational Storage under HTAP Workloads -- 论文阅读</span>
              

  <span class = "recent-item-meta">
  
  
  
  
    
    
    <p class="page_meta-readtime">
      
        5 minute read
      
    </p>
  
  
  </span>

            </div>
          </a>
        </div>
      
    
  </div>
</div> <!-- End Recent-Box -->

        <div class="newsletter" id="mc_embed_signup">
  <h2 class="page-subtitle">Newsletter</h2>
  <div class="form-container">
    <p>Subscribe here to get our latest updates</p>
    <form action="https://github.us1.list-manage.com/subscribe/post?u=8ece198b3eb260e6838461a60&amp;id=397d90b5f4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <label class="screen-reader-text" for="mce-EMAIL">Email Address</label>
      <div class="newsletter-box" id="mc_embed_signup_scroll">
        <input type="email" name="EMAIL" placeholder="Email address" class="email-input" id="mce-EMAIL" required>
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe-btn" id="mc-embedded-subscribe">
      </div>
    </form>
  </div>
</div> <!-- End Newsletter -->

        <section class="comment-area">
    <div class="comment-wrapper">
        
        <div class="row" id="comment-curtain">
            <div class="col-lg-8 col-sm-10 mr-auto ml-auto">
                <h2 class="page-subtitle">Comments</h2>
                <div class="comments-trigger" onClick="toggle_comments()">
                    <i class="fa fa-comments"></i>&nbsp;&nbsp;Write a comment ...
                </div>
            </div>
        </div>
        

        
            
        
    </div>
</section> <!-- End Comment Area -->
      </div>
    </div> <!-- End Wrapper -->
  </article>
  <div class="search-box">
  <div class="wrapper">
    <div class="search-grid">
      <form class="search-form">
        <div id="search-container">
          <input type="text" id="search-input" class="search" placeholder="Search">
        </div>
      </form>
      <ul id="results-container" class="results-search"></ul>
      <div class="icon-close-container">
        <span class="search-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>
    </div>
  </div>
</div>

  




<footer class="main-footer">
    <div class="footer-wrapper">
        <div class="logo-symbol">
            <a class="logo-link" title="冷宜隆的博客" href="./">
                <svg width="45px" height="45px" class="logo-symbol" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" version="1.0" viewBox="0 0 649 649"><g fill="currentColor" stroke="none"><path d="M2938 6380 c-551 -53 -1031 -220 -1478 -514 -306 -201 -588 -470 -810 -771 -276 -374 -475 -850 -559 -1336 -64 -371 -53 -836 29 -1211 155 -712 552 -1347 1130 -1810 450 -360 1021 -589 1640 -659 58 -6 202 -12 320 -12 282 0 503 26 756 87 902 220 1680 841 2079 1661 303 622 402 1333 279 2005 -90 496 -313 984 -634 1390 -111 140 -378 404 -519 513 -456 352 -957 560 -1549 643 -126 17 -558 26 -684 14z m687 -220 c77 -11 189 -32 250 -46 127 -29 345 -94 345 -103 0 -4 -341 -188 -757 -409 l-757 -403 -41 22 c-22 13 -58 26 -79 29 l-40 5 -148 370 c-82 204 -150 377 -153 386 -10 29 325 119 570 153 169 24 174 24 430 21 183 -3 273 -8 380 -25z m-1292 -546 l157 -387 -24 -28 c-13 -16 -30 -44 -36 -64 -6 -19 -17 -35 -23 -35 -7 -1 -382 -54 -834 -119 -453 -64 -823 -115 -823 -111 0 3 43 62 95 132 269 358 584 630 980 844 90 49 321 153 341 154 6 0 81 -174 167 -386z m2026 347 l37 -20 129 -440 128 -440 -35 -39 c-20 -22 -37 -44 -39 -50 -3 -8 -290 13 -929 66 -775 65 -925 80 -928 92 -2 11 223 134 785 432 433 228 794 416 801 417 7 0 30 -8 51 -18z m204 -92 c420 -211 850 -600 1137 -1027 34 -51 60 -95 57 -98 -4 -4 -805 157 -859 172 -10 3 -18 12 -18 21 0 58 -78 133 -137 133 -18 0 -33 2 -33 5 0 3 -52 184 -116 403 -63 218 -117 405 -120 415 -3 9 -3 17 1 17 3 0 42 -19 88 -41z m-913 -894 c494 -41 904 -75 912 -75 7 -1 24 -23 36 -51 l24 -50 -169 -269 -168 -270 -44 0 c-24 0 -63 -9 -86 -21 l-42 -21 -679 402 c-373 222 -688 409 -699 416 -18 13 -18 14 -1 14 10 0 422 -34 916 -75z m-1175 18 l48 -48 -31 -225 c-18 -124 -60 -417 -94 -652 l-62 -428 -44 0 c-24 0 -51 -4 -61 -10 -16 -8 -146 87 -777 566 -418 317 -761 578 -763 580 -3 3 0 9 5 14 8 8 1633 247 1700 249 25 1 42 -9 79 -46z m915 -414 l690 -411 0 -38 0 -37 -147 -46 c-82 -26 -453 -148 -825 -271 l-676 -223 -22 30 -22 29 98 669 c82 557 101 669 114 669 8 0 31 9 50 19 19 11 38 20 43 20 4 1 318 -184 697 -410z m1959 175 c251 -53 457 -97 457 -98 9 -9 123 -247 153 -320 113 -272 189 -599 209 -901 l9 -130 -231 -273 c-224 -265 -232 -273 -264 -270 l-34 3 -418 1013 -419 1013 26 30 c15 16 33 29 41 29 8 0 220 -43 471 -96z m-593 2 c6 -5 804 -1949 802 -1952 -2 -2 -274 272 -605 609 l-600 612 13 32 c20 46 17 82 -9 128 l-23 41 170 271 171 272 40 -6 c22 -3 41 -6 41 -7z m-3341 -611 c402 -307 733 -561 737 -564 31 -26 -38 -31 -947 -65 -516 -19 -941 -33 -944 -30 -2 2 6 77 18 165 49 346 162 693 324 986 44 82 52 91 66 79 9 -7 345 -264 746 -571z m2710 -142 c17 -16 39 -32 48 -38 15 -9 13 -64 -23 -695 -22 -377 -40 -686 -40 -687 0 -2 -8 -3 -19 -3 -10 0 -30 -9 -45 -21 l-27 -21 -342 200 c-188 110 -542 317 -787 460 -245 144 -445 266 -445 273 0 8 312 116 820 285 451 150 822 272 824 273 2 1 18 -11 36 -26z m590 -425 c220 -222 500 -505 623 -629 l223 -225 -17 -31 -18 -30 -585 -82 c-322 -45 -602 -85 -621 -88 -31 -4 -37 -1 -53 27 -11 17 -34 39 -53 47 -19 9 -34 21 -34 27 -1 6 16 316 37 688 l37 678 26 9 c14 5 27 10 30 10 3 1 185 -180 405 -401z m-2587 -114 c-2 -9 -224 -178 -494 -375 l-492 -359 -38 16 c-26 11 -53 14 -84 10 -25 -3 -55 -7 -67 -8 -16 -2 -106 76 -362 316 -204 192 -341 327 -341 338 0 16 10 18 83 19 45 0 431 13 857 28 984 36 942 35 938 15z m59 -88 l22 -23 -104 -467 c-58 -256 -105 -468 -105 -470 0 -2 -14 -6 -32 -10 -17 -3 -47 -18 -65 -32 l-34 -26 -339 122 -338 122 -7 45 c-5 37 -3 47 12 58 10 7 229 169 488 359 258 190 472 346 475 346 3 0 15 -11 27 -24z m1013 -430 c421 -245 769 -452 775 -460 5 -8 7 -18 3 -21 -3 -4 -417 -41 -920 -84 l-913 -77 -16 26 c-9 15 -29 36 -45 47 l-28 21 104 465 105 465 43 7 c27 4 55 17 75 35 18 16 37 28 42 26 6 -2 354 -204 775 -450z m-2307 -276 c-7 -71 -4 -98 10 -126 l15 -30 -206 -248 -206 -248 -27 59 c-140 314 -228 733 -229 1086 l0 138 323 -303 c270 -254 322 -307 320 -328z m5277 366 c-17 -270 -58 -489 -135 -721 -38 -117 -134 -350 -140 -343 -1 2 -35 117 -75 256 l-72 253 26 25 c51 52 58 134 15 189 -21 26 -21 26 -2 48 11 12 102 120 203 240 100 120 184 216 186 214 2 -2 -1 -74 -6 -161z m-642 -487 l21 -41 -456 -782 c-251 -429 -461 -787 -467 -794 -9 -9 -19 -10 -42 -2 l-29 10 -174 676 -174 675 35 37 c20 20 40 51 45 67 l10 30 584 82 c321 44 594 82 605 82 16 1 27 -10 42 -40z m-4015 -145 c301 -109 327 -120 327 -142 0 -12 7 -39 15 -58 l15 -36 -411 -469 c-226 -259 -413 -468 -415 -466 -2 2 1 219 6 483 5 263 10 538 10 610 l0 132 29 12 c16 6 39 23 52 36 13 14 28 23 34 21 5 -2 157 -57 338 -123z m-517 -413 c-3 -262 -9 -527 -12 -589 -8 -134 -2 -135 -120 20 -93 121 -192 278 -272 428 l-61 115 215 257 c181 216 218 255 235 251 l22 -6 -7 -476z m4695 460 c3 -3 43 -133 88 -289 l82 -282 -62 -108 c-75 -130 -175 -278 -265 -392 -140 -176 -514 -528 -595 -558 -13 -5 -72 -13 -130 -17 l-105 -7 -16 40 -16 40 462 796 461 796 45 -6 c25 -4 48 -9 51 -13z m-1736 -69 c-6 -5 -361 -192 -790 -417 -429 -224 -806 -422 -838 -439 -52 -28 -59 -29 -70 -15 -17 22 -78 59 -99 59 -19 0 -16 -14 -68 300 -29 169 -38 246 -30 248 27 9 62 50 74 87 11 32 19 41 43 44 67 8 1683 139 1733 140 30 0 50 -3 45 -7z m90 -62 c10 -11 38 -26 62 -31 38 -10 44 -16 52 -48 90 -346 333 -1280 337 -1292 3 -11 -7 -23 -29 -36 -19 -11 -42 -38 -53 -60 l-19 -40 -1050 297 c-859 244 -1050 301 -1050 315 0 12 239 141 860 465 473 247 863 449 866 449 3 1 14 -8 24 -19z m-2076 -210 c13 0 21 -9 25 -27 10 -47 86 -497 86 -508 0 -5 -13 -19 -29 -29 -35 -24 -57 -59 -66 -108 -4 -22 -14 -39 -24 -42 -143 -41 -861 -236 -870 -236 -7 0 -11 5 -9 11 2 6 190 224 418 484 349 399 416 472 431 464 10 -5 27 -9 38 -9z m1376 -1065 c741 -208 1053 -300 1060 -312 6 -9 24 -32 41 -52 l31 -35 -30 -68 c-34 -77 -25 -71 -205 -139 -310 -116 -653 -180 -984 -183 -97 0 -178 1 -181 4 -89 106 -817 1053 -817 1063 0 18 9 27 23 21 7 -2 485 -137 1062 -299z m-1319 264 c31 -35 81 -51 134 -44 l46 6 380 -487 c208 -268 385 -496 392 -506 13 -17 10 -18 -45 -12 -640 65 -1267 346 -1732 776 l-61 57 42 12 c271 74 805 218 814 218 6 1 19 -9 30 -20z m2814 -563 c0 -5 -223 -138 -278 -165 -24 -13 -46 -20 -49 -18 -2 3 3 19 11 36 12 22 27 33 59 42 27 7 56 26 81 52 35 37 44 41 105 47 36 4 67 8 69 9 1 0 2 -1 2 -3z" transform="translate(0.000000,644.000000) scale(0.100000,-0.100000)"/></g></svg>
            </a>
        </div>
        <div class="copyright">
          <p>2024 &copy; 冷宜隆</p>
        </div>
        <div class="footer-nav">
            <div>
                <a href="./archive.html">
                    Posts
                </a>
            </div>
            <div>
                <a href="./tags.html">
                    Tags
                </a>
            </div>
            <div>
                <a href="./about.html">
                    About
                </a>
            </div>
        </div>
    </div>
</footer> <!-- End Footer -->

</div>

    <div class="top" title="Top">
      <svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="angle-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512" class="svg-inline--fa fa-angle-up fa-w-8 fa-2x"><path fill="currentColor" d="M136.5 185.1l116 117.8c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L128 224.7 27.6 326.9c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17l116-117.8c4.7-4.6 12.3-4.6 17 .1z" class=""></path></svg>
    </div>
    




<!-- JS -->








<script>
(function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var logo = document.getElementById('logo');
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
    storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
    var data = storage.getItem('theme');
    try {
        data = JSON.parse(data ? data : '');
    } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
    }
    return data;
    }

    function handleThemeToggle(nightShift) {
    themeData.nightShift = nightShift;
    saveThemeData(themeData);
    html.dataset.theme = nightShift ? 'dark' : 'light';
    if (nightShift) {
        logo.setAttribute("src", "./assets/img/branding/YIlong_last.svg");
    } else {
        logo.setAttribute("src", "./assets/img/branding/YIlong_last_3.svg");
    }
    setTimeout(function() {
        sw.checked = nightShift ? true : false;
    }, 50);
    }

    function autoThemeToggle() {
    // Next time point of theme toggle
    var now = new Date();
    var toggleAt = new Date();
    var hours = now.getHours();
    var nightShift = hours >= 19 || hours <=7;

    if (nightShift) {
        if (hours > 7) {
        toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
    } else {
        toggleAt.setHours(19);
    }

    toggleAt.setMinutes(0);
    toggleAt.setSeconds(0);
    toggleAt.setMilliseconds(0)

    var delay = toggleAt.getTime() - now.getTime();

    // auto toggle theme mode
    setTimeout(function() {
        handleThemeToggle(!nightShift);
    }, delay);

    return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
    };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
    handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
    var data = autoThemeToggle();

    // Toggle theme by local setting
    if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
    } else {
        handleThemeToggle(themeData.nightShift);
    }
    } else if (nightModeOption == 'manual') {
    handleThemeToggle(themeData.nightShift);
    } else {
    var nightShift = themeData.nightShift;
    if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
    }
    handleThemeToggle(nightShift);
    }
})();
</script>

<script src="./assets/js/jekyll-search.js"></script>
<script src="./assets/js/jquery-3.6.0.min.js"></script>


  <script>
    function toggle_comments(){
      var commentCurtain = document.getElementById('comment-curtain')
      if (commentCurtain) {
        commentCurtain.classList.toggle('hide')
      }
      var disqusThread = document.getElementById('comment-layout')
      if (disqusThread) {
        disqusThread.classList.toggle('show')
      }
    }

    function copyToClipboard() {
      navigator.clipboard.writeText('http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html').then(function() {
      alerts = document.getElementsByClassName('alert')
      for (i=0; i < alerts.length; i++){
        alerts[i].innerHTML='\u00ABlink copied\u00BB';
        setTimeout((function(i){ return function(){alerts[i].innerHTML='';}})(i), 1600 );
      };
      }, function() {
        prompt("Unable to copy, please use this link:", "http://localhost:4000/FPGA%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB.html");
      });
    }

    $(function () {
      if (document.getElementById('comment-curtain') == null){
        var disqusThread = document.getElementById('comment-layout')
        if (disqusThread) {
          disqusThread.classList.toggle('show')
        }
      }

      var tweetTags = document.getElementsByTagName("tweet");

      if (tweetTags != null){
        for (i=0; i<tweetTags.length; i++){
          tweetA = document.createElement("a")
          tweetA.href = 'https://twitter.com/share?text='
                       + encodeURIComponent(tweetTags[i].textContent)
                       + '&via=MvmThe&url='
                       + window.location.href;
          tweetA.target = "_blank";
          tweetA.className = 'twitter';
          tweetSpanText = document.createElement('span');
          tweetSpanText.className = 'tweetText';
          tweetSpanText.appendChild(document.createTextNode(tweetTags[i].textContent));
          tweetSpanIcon = document.createElement('span');
          tweetSpanIcon.className = 'tweetIcon';
          tweetSpanIcon.appendChild(document.createTextNode("click to tweet"));
          tweetI = document.createElement("i");
          tweetI.className = 'fa fa-twitter';
          tweetSpanIcon.appendChild(tweetI);
          tweetA.appendChild(tweetSpanText);
          tweetA.appendChild(tweetSpanIcon);
          tweetTags[i].textContent = "";
          tweetTags[i].appendChild(tweetA);
        }
      }

    });

  </script>
  <!-- Mailchimp linking -->
  <script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/8ece198b3eb260e6838461a60/d20d9fb9aad962399025da52e.js");</script>






<script src="./assets/js/main.js"></script>
<script>
  SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('results-container'),
      json: './search.json',
      searchResultTemplate: '<li><a href="{url}" title="{description}">{title}</a><p>{description}</p></li>',
      noResultsText: 'No results found',
      fuzzy: false,
      exclude: ['Welcome']
    });
</script>




    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R8SZS2YBZK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R8SZS2YBZK');
</script>
  </body>
</html>
